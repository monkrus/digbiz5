e738a2b325e916cb4c164ec28075ffb8
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = processFilter;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _processColor = _interopRequireDefault(require("./processColor"));
function processFilter(filter) {
  var result = [];
  if (filter == null) {
    return result;
  }
  if (typeof filter === 'string') {
    filter = filter.replace(/\n/g, ' ');
    var regex = /([\w-]+)\(([^()]*|\([^()]*\)|[^()]*\([^()]*\)[^()]*)\)/g;
    var matches;
    while (matches = regex.exec(filter)) {
      var filterName = matches[1].toLowerCase();
      if (filterName === 'drop-shadow') {
        var dropShadow = parseDropShadow(matches[2]);
        if (dropShadow != null) {
          result.push({
            dropShadow: dropShadow
          });
        } else {
          return [];
        }
      } else {
        var camelizedName = filterName === 'drop-shadow' ? 'dropShadow' : filterName === 'hue-rotate' ? 'hueRotate' : filterName;
        var amount = _getFilterAmount(camelizedName, matches[2]);
        if (amount != null) {
          var filterFunction = {};
          filterFunction[camelizedName] = amount;
          result.push(filterFunction);
        } else {
          return [];
        }
      }
    }
  } else if (Array.isArray(filter)) {
    for (var _filterFunction of filter) {
      var _Object$entries$ = (0, _slicedToArray2.default)(Object.entries(_filterFunction)[0], 2),
        _filterName = _Object$entries$[0],
        filterValue = _Object$entries$[1];
      if (_filterName === 'dropShadow') {
        var _dropShadow = parseDropShadow(filterValue);
        if (_dropShadow == null) {
          return [];
        }
        result.push({
          dropShadow: _dropShadow
        });
      } else {
        var _amount = _getFilterAmount(_filterName, filterValue);
        if (_amount != null) {
          var resultObject = {};
          resultObject[_filterName] = _amount;
          result.push(resultObject);
        } else {
          return [];
        }
      }
    }
  } else {
    throw new TypeError(`${typeof filter} filter is not a string or array`);
  }
  return result;
}
function _getFilterAmount(filterName, filterArgs) {
  var filterArgAsNumber;
  var unit;
  if (typeof filterArgs === 'string') {
    var argsWithUnitsRegex = new RegExp(/([+-]?\d*(\.\d+)?)([a-zA-Z%]+)?/g);
    var match = argsWithUnitsRegex.exec(filterArgs);
    if (!match || isNaN(Number(match[1]))) {
      return undefined;
    }
    filterArgAsNumber = Number(match[1]);
    unit = match[3];
  } else if (typeof filterArgs === 'number') {
    filterArgAsNumber = filterArgs;
  } else {
    return undefined;
  }
  switch (filterName) {
    case 'hueRotate':
      if (filterArgAsNumber === 0) {
        return 0;
      }
      if (unit !== 'deg' && unit !== 'rad') {
        return undefined;
      }
      return unit === 'rad' ? 180 * filterArgAsNumber / Math.PI : filterArgAsNumber;
    case 'blur':
      if (unit && unit !== 'px' || filterArgAsNumber < 0) {
        return undefined;
      }
      return filterArgAsNumber;
    case 'brightness':
    case 'contrast':
    case 'grayscale':
    case 'invert':
    case 'opacity':
    case 'saturate':
    case 'sepia':
      if (unit && unit !== '%' && unit !== 'px' || filterArgAsNumber < 0) {
        return undefined;
      }
      if (unit === '%') {
        filterArgAsNumber /= 100;
      }
      return filterArgAsNumber;
    default:
      return undefined;
  }
}
function parseDropShadow(rawDropShadow) {
  var dropShadow = typeof rawDropShadow === 'string' ? parseDropShadowString(rawDropShadow) : rawDropShadow;
  var parsedDropShadow = {
    offsetX: 0,
    offsetY: 0
  };
  var offsetX;
  var offsetY;
  for (var arg in dropShadow) {
    var value = void 0;
    switch (arg) {
      case 'offsetX':
        value = typeof dropShadow.offsetX === 'string' ? parseLength(dropShadow.offsetX) : dropShadow.offsetX;
        if (value == null) {
          return null;
        }
        offsetX = value;
        break;
      case 'offsetY':
        value = typeof dropShadow.offsetY === 'string' ? parseLength(dropShadow.offsetY) : dropShadow.offsetY;
        if (value == null) {
          return null;
        }
        offsetY = value;
        break;
      case 'standardDeviation':
        value = typeof dropShadow.standardDeviation === 'string' ? parseLength(dropShadow.standardDeviation) : dropShadow.standardDeviation;
        if (value == null || value < 0) {
          return null;
        }
        parsedDropShadow.standardDeviation = value;
        break;
      case 'color':
        var color = (0, _processColor.default)(dropShadow.color);
        if (color == null) {
          return null;
        }
        parsedDropShadow.color = color;
        break;
      default:
        return null;
    }
  }
  if (offsetX == null || offsetY == null) {
    return null;
  }
  parsedDropShadow.offsetX = offsetX;
  parsedDropShadow.offsetY = offsetY;
  return parsedDropShadow;
}
function parseDropShadowString(rawDropShadow) {
  var dropShadow = {
    offsetX: 0,
    offsetY: 0
  };
  var offsetX;
  var offsetY;
  var lengthCount = 0;
  var keywordDetectedAfterLength = false;
  for (var arg of rawDropShadow.split(/\s+(?![^(]*\))/)) {
    var processedColor = (0, _processColor.default)(arg);
    if (processedColor != null) {
      if (dropShadow.color != null) {
        return null;
      }
      if (offsetX != null) {
        keywordDetectedAfterLength = true;
      }
      dropShadow.color = arg;
      continue;
    }
    switch (lengthCount) {
      case 0:
        offsetX = arg;
        lengthCount++;
        break;
      case 1:
        if (keywordDetectedAfterLength) {
          return null;
        }
        offsetY = arg;
        lengthCount++;
        break;
      case 2:
        if (keywordDetectedAfterLength) {
          return null;
        }
        dropShadow.standardDeviation = arg;
        lengthCount++;
        break;
      default:
        return null;
    }
  }
  if (offsetX == null || offsetY == null) {
    return null;
  }
  dropShadow.offsetX = offsetX;
  dropShadow.offsetY = offsetY;
  return dropShadow;
}
function parseLength(length) {
  var argsWithUnitsRegex = /([+-]?\d*(\.\d+)?)([\w\W]+)?/g;
  var match = argsWithUnitsRegex.exec(length);
  if (!match || Number.isNaN(match[1])) {
    return null;
  }
  if (match[3] != null && match[3] !== 'px') {
    return null;
  }
  if (match[3] == null && match[1] !== '0') {
    return null;
  }
  return Number(match[1]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsInByb2Nlc3NGaWx0ZXIiLCJfc2xpY2VkVG9BcnJheTIiLCJfcHJvY2Vzc0NvbG9yIiwiZmlsdGVyIiwicmVzdWx0IiwicmVwbGFjZSIsInJlZ2V4IiwibWF0Y2hlcyIsImV4ZWMiLCJmaWx0ZXJOYW1lIiwidG9Mb3dlckNhc2UiLCJkcm9wU2hhZG93IiwicGFyc2VEcm9wU2hhZG93IiwicHVzaCIsImNhbWVsaXplZE5hbWUiLCJhbW91bnQiLCJfZ2V0RmlsdGVyQW1vdW50IiwiZmlsdGVyRnVuY3Rpb24iLCJBcnJheSIsImlzQXJyYXkiLCJfT2JqZWN0JGVudHJpZXMkIiwiZW50cmllcyIsImZpbHRlclZhbHVlIiwicmVzdWx0T2JqZWN0IiwiVHlwZUVycm9yIiwiZmlsdGVyQXJncyIsImZpbHRlckFyZ0FzTnVtYmVyIiwidW5pdCIsImFyZ3NXaXRoVW5pdHNSZWdleCIsIlJlZ0V4cCIsIm1hdGNoIiwiaXNOYU4iLCJOdW1iZXIiLCJ1bmRlZmluZWQiLCJNYXRoIiwiUEkiLCJyYXdEcm9wU2hhZG93IiwicGFyc2VEcm9wU2hhZG93U3RyaW5nIiwicGFyc2VkRHJvcFNoYWRvdyIsIm9mZnNldFgiLCJvZmZzZXRZIiwiYXJnIiwicGFyc2VMZW5ndGgiLCJzdGFuZGFyZERldmlhdGlvbiIsImNvbG9yIiwicHJvY2Vzc0NvbG9yIiwibGVuZ3RoQ291bnQiLCJrZXl3b3JkRGV0ZWN0ZWRBZnRlckxlbmd0aCIsInNwbGl0IiwicHJvY2Vzc2VkQ29sb3IiLCJsZW5ndGgiXSwic291cmNlcyI6WyJwcm9jZXNzRmlsdGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdCBzdHJpY3QtbG9jYWxcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtDb2xvclZhbHVlfSBmcm9tICcuL1N0eWxlU2hlZXQnO1xuaW1wb3J0IHR5cGUge0Ryb3BTaGFkb3dWYWx1ZSwgRmlsdGVyRnVuY3Rpb259IGZyb20gJy4vU3R5bGVTaGVldFR5cGVzJztcblxuaW1wb3J0IHByb2Nlc3NDb2xvciBmcm9tICcuL3Byb2Nlc3NDb2xvcic7XG5cbnR5cGUgUGFyc2VkRmlsdGVyID1cbiAgfCB7YnJpZ2h0bmVzczogbnVtYmVyfVxuICB8IHtibHVyOiBudW1iZXJ9XG4gIHwge2NvbnRyYXN0OiBudW1iZXJ9XG4gIHwge2dyYXlzY2FsZTogbnVtYmVyfVxuICB8IHtodWVSb3RhdGU6IG51bWJlcn1cbiAgfCB7aW52ZXJ0OiBudW1iZXJ9XG4gIHwge29wYWNpdHk6IG51bWJlcn1cbiAgfCB7c2F0dXJhdGU6IG51bWJlcn1cbiAgfCB7c2VwaWE6IG51bWJlcn1cbiAgfCB7ZHJvcFNoYWRvdzogUGFyc2VkRHJvcFNoYWRvd307XG5cbnR5cGUgUGFyc2VkRHJvcFNoYWRvdyA9IHtcbiAgb2Zmc2V0WDogbnVtYmVyLFxuICBvZmZzZXRZOiBudW1iZXIsXG4gIHN0YW5kYXJkRGV2aWF0aW9uPzogbnVtYmVyLFxuICBjb2xvcj86IENvbG9yVmFsdWUsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcm9jZXNzRmlsdGVyKFxuICBmaWx0ZXI6ID8oJFJlYWRPbmx5QXJyYXk8RmlsdGVyRnVuY3Rpb24+IHwgc3RyaW5nKSxcbik6ICRSZWFkT25seUFycmF5PFBhcnNlZEZpbHRlcj4ge1xuICBsZXQgcmVzdWx0OiBBcnJheTxQYXJzZWRGaWx0ZXI+ID0gW107XG4gIGlmIChmaWx0ZXIgPT0gbnVsbCkge1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycpIHtcbiAgICBmaWx0ZXIgPSBmaWx0ZXIucmVwbGFjZSgvXFxuL2csICcgJyk7XG5cbiAgICAvLyBtYXRjaGVzIG9uIGZ1bmN0aW9ucyB3aXRoIGFyZ3MgYW5kIG5lc3RlZCBmdW5jdGlvbnMgbGlrZSBcImRyb3Atc2hhZG93KDEwIDEwIDEwIHJnYmEoMCwgMCwgMCwgMSkpXCJcbiAgICBjb25zdCByZWdleCA9IC8oW1xcdy1dKylcXCgoW14oKV0qfFxcKFteKCldKlxcKXxbXigpXSpcXChbXigpXSpcXClbXigpXSopXFwpL2c7XG4gICAgbGV0IG1hdGNoZXM7XG5cbiAgICB3aGlsZSAoKG1hdGNoZXMgPSByZWdleC5leGVjKGZpbHRlcikpKSB7XG4gICAgICBsZXQgZmlsdGVyTmFtZSA9IG1hdGNoZXNbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChmaWx0ZXJOYW1lID09PSAnZHJvcC1zaGFkb3cnKSB7XG4gICAgICAgIGNvbnN0IGRyb3BTaGFkb3cgPSBwYXJzZURyb3BTaGFkb3cobWF0Y2hlc1syXSk7XG4gICAgICAgIGlmIChkcm9wU2hhZG93ICE9IG51bGwpIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh7ZHJvcFNoYWRvd30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY2FtZWxpemVkTmFtZSA9XG4gICAgICAgICAgZmlsdGVyTmFtZSA9PT0gJ2Ryb3Atc2hhZG93J1xuICAgICAgICAgICAgPyAnZHJvcFNoYWRvdydcbiAgICAgICAgICAgIDogZmlsdGVyTmFtZSA9PT0gJ2h1ZS1yb3RhdGUnXG4gICAgICAgICAgICAgID8gJ2h1ZVJvdGF0ZSdcbiAgICAgICAgICAgICAgOiBmaWx0ZXJOYW1lO1xuICAgICAgICBjb25zdCBhbW91bnQgPSBfZ2V0RmlsdGVyQW1vdW50KGNhbWVsaXplZE5hbWUsIG1hdGNoZXNbMl0pO1xuXG4gICAgICAgIGlmIChhbW91bnQgIT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IGZpbHRlckZ1bmN0aW9uID0ge307XG4gICAgICAgICAgLy8gJEZsb3dGaXhNZSBUaGUga2V5IHdpbGwgYmUgdGhlIGNvcnJlY3Qgb25lIGJ1dCBmbG93IGNhbid0IHNlZSB0aGF0LlxuICAgICAgICAgIGZpbHRlckZ1bmN0aW9uW2NhbWVsaXplZE5hbWVdID0gYW1vdW50O1xuICAgICAgICAgIC8vICRGbG93Rml4TWUgVGhlIGtleSB3aWxsIGJlIHRoZSBjb3JyZWN0IG9uZSBidXQgZmxvdyBjYW4ndCBzZWUgdGhhdC5cbiAgICAgICAgICByZXN1bHQucHVzaChmaWx0ZXJGdW5jdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgYW55IHByaW1pdGl2ZSBpcyBpbnZhbGlkIHRoZW4gYXBwbHkgbm9uZSBvZiB0aGUgZmlsdGVycy4gVGhpcyBpcyBob3dcbiAgICAgICAgICAvLyB3ZWIgd29ya3MgYW5kIG1ha2VzIGl0IGNsZWFyIHRoYXQgc29tZXRoaW5nIGlzIHdyb25nIGJlY3Vhc2Ugbm9cbiAgICAgICAgICAvLyBncmFwaGljYWwgZWZmZWN0cyBhcmUgaGFwcGVuaW5nLlxuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpbHRlcikpIHtcbiAgICBmb3IgKGNvbnN0IGZpbHRlckZ1bmN0aW9uIG9mIGZpbHRlcikge1xuICAgICAgY29uc3QgW2ZpbHRlck5hbWUsIGZpbHRlclZhbHVlXSA9IE9iamVjdC5lbnRyaWVzKGZpbHRlckZ1bmN0aW9uKVswXTtcbiAgICAgIGlmIChmaWx0ZXJOYW1lID09PSAnZHJvcFNoYWRvdycpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICBjb25zdCBkcm9wU2hhZG93ID0gcGFyc2VEcm9wU2hhZG93KGZpbHRlclZhbHVlKTtcbiAgICAgICAgaWYgKGRyb3BTaGFkb3cgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQucHVzaCh7ZHJvcFNoYWRvd30pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYW1vdW50ID0gX2dldEZpbHRlckFtb3VudChmaWx0ZXJOYW1lLCBmaWx0ZXJWYWx1ZSk7XG5cbiAgICAgICAgaWYgKGFtb3VudCAhPSBudWxsKSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0T2JqZWN0ID0ge307XG4gICAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICAgIHJlc3VsdE9iamVjdFtmaWx0ZXJOYW1lXSA9IGFtb3VudDtcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgcmVzdWx0LnB1c2gocmVzdWx0T2JqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBhbnkgcHJpbWl0aXZlIGlzIGludmFsaWQgdGhlbiBhcHBseSBub25lIG9mIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIGhvd1xuICAgICAgICAgIC8vIHdlYiB3b3JrcyBhbmQgbWFrZXMgaXQgY2xlYXIgdGhhdCBzb21ldGhpbmcgaXMgd3JvbmcgYmVjdWFzZSBub1xuICAgICAgICAgIC8vIGdyYXBoaWNhbCBlZmZlY3RzIGFyZSBoYXBwZW5pbmcuXG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7dHlwZW9mIGZpbHRlcn0gZmlsdGVyIGlzIG5vdCBhIHN0cmluZyBvciBhcnJheWApO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gX2dldEZpbHRlckFtb3VudChmaWx0ZXJOYW1lOiBzdHJpbmcsIGZpbHRlckFyZ3M6IG1peGVkKTogP251bWJlciB7XG4gIGxldCBmaWx0ZXJBcmdBc051bWJlcjogbnVtYmVyO1xuICBsZXQgdW5pdDogc3RyaW5nO1xuICBpZiAodHlwZW9mIGZpbHRlckFyZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gbWF0Y2hlcyBvbiBhcmdzIHdpdGggdW5pdHMgbGlrZSBcIjEuNSA1JSAtODBkZWdcIlxuICAgIGNvbnN0IGFyZ3NXaXRoVW5pdHNSZWdleCA9IG5ldyBSZWdFeHAoLyhbKy1dP1xcZCooXFwuXFxkKyk/KShbYS16QS1aJV0rKT8vZyk7XG4gICAgY29uc3QgbWF0Y2ggPSBhcmdzV2l0aFVuaXRzUmVnZXguZXhlYyhmaWx0ZXJBcmdzKTtcblxuICAgIGlmICghbWF0Y2ggfHwgaXNOYU4oTnVtYmVyKG1hdGNoWzFdKSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZmlsdGVyQXJnQXNOdW1iZXIgPSBOdW1iZXIobWF0Y2hbMV0pO1xuICAgIHVuaXQgPSBtYXRjaFszXTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZmlsdGVyQXJncyA9PT0gJ251bWJlcicpIHtcbiAgICBmaWx0ZXJBcmdBc051bWJlciA9IGZpbHRlckFyZ3M7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHN3aXRjaCAoZmlsdGVyTmFtZSkge1xuICAgIC8vIEh1ZSByb3RhdGUgdGFrZXMgc29tZSBhbmdsZSB0aGF0IGNhbiBoYXZlIGEgdW5pdCBhbmQgY2FuIGJlXG4gICAgLy8gbmVnYXRpdmUuIEFkZGl0aW9uYWxseSwgMCB3aXRoIG5vIHVuaXQgaXMgYWxsb3dlZC5cbiAgICBjYXNlICdodWVSb3RhdGUnOlxuICAgICAgaWYgKGZpbHRlckFyZ0FzTnVtYmVyID09PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKHVuaXQgIT09ICdkZWcnICYmIHVuaXQgIT09ICdyYWQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5pdCA9PT0gJ3JhZCdcbiAgICAgICAgPyAoMTgwICogZmlsdGVyQXJnQXNOdW1iZXIpIC8gTWF0aC5QSVxuICAgICAgICA6IGZpbHRlckFyZ0FzTnVtYmVyO1xuICAgIC8vIGJsdXIgdGFrZXMgYW55IHBvc2l0aXZlIENTUyBsZW5ndGggdGhhdCBpcyBub3QgYSBwZXJjZW50LiBJbiBSTlxuICAgIC8vIHdlIGN1cnJlbnRseSBvbmx5IGhhdmUgRElQcywgc28gd2UgYXJlIG5vdCBwYXJzaW5nIHVuaXRzIGhlcmUuXG4gICAgY2FzZSAnYmx1cic6XG4gICAgICBpZiAoKHVuaXQgJiYgdW5pdCAhPT0gJ3B4JykgfHwgZmlsdGVyQXJnQXNOdW1iZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmlsdGVyQXJnQXNOdW1iZXI7XG4gICAgLy8gQWxsIG90aGVyIGZpbHRlcnMgZXhjZXB0IHRha2UgYSBub24gbmVnYXRpdmUgbnVtYmVyIG9yIHBlcmNlbnRhZ2UuIFRoZXJlXG4gICAgLy8gYXJlIG5vIHVuaXRzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHZhbHVlIGFuZCBwZXJjZW50YWdlIG51bWJlcnMgbWFwIDEtdG8tMVxuICAgIC8vIHRvIGEgbm9uLXBlcmNlbnRhZ2UgbnVtYmVyIChlLmcuIDUwJSA9PSAwLjUpLlxuICAgIGNhc2UgJ2JyaWdodG5lc3MnOlxuICAgIGNhc2UgJ2NvbnRyYXN0JzpcbiAgICBjYXNlICdncmF5c2NhbGUnOlxuICAgIGNhc2UgJ2ludmVydCc6XG4gICAgY2FzZSAnb3BhY2l0eSc6XG4gICAgY2FzZSAnc2F0dXJhdGUnOlxuICAgIGNhc2UgJ3NlcGlhJzpcbiAgICAgIGlmICgodW5pdCAmJiB1bml0ICE9PSAnJScgJiYgdW5pdCAhPT0gJ3B4JykgfHwgZmlsdGVyQXJnQXNOdW1iZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAodW5pdCA9PT0gJyUnKSB7XG4gICAgICAgIGZpbHRlckFyZ0FzTnVtYmVyIC89IDEwMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmaWx0ZXJBcmdBc051bWJlcjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZURyb3BTaGFkb3coXG4gIHJhd0Ryb3BTaGFkb3c6IHN0cmluZyB8IERyb3BTaGFkb3dWYWx1ZSxcbik6ID9QYXJzZWREcm9wU2hhZG93IHtcbiAgY29uc3QgZHJvcFNoYWRvdyA9XG4gICAgdHlwZW9mIHJhd0Ryb3BTaGFkb3cgPT09ICdzdHJpbmcnXG4gICAgICA/IHBhcnNlRHJvcFNoYWRvd1N0cmluZyhyYXdEcm9wU2hhZG93KVxuICAgICAgOiByYXdEcm9wU2hhZG93O1xuXG4gIGNvbnN0IHBhcnNlZERyb3BTaGFkb3c6IFBhcnNlZERyb3BTaGFkb3cgPSB7XG4gICAgb2Zmc2V0WDogMCxcbiAgICBvZmZzZXRZOiAwLFxuICB9O1xuICBsZXQgb2Zmc2V0WDogbnVtYmVyO1xuICBsZXQgb2Zmc2V0WTogbnVtYmVyO1xuXG4gIGZvciAoY29uc3QgYXJnIGluIGRyb3BTaGFkb3cpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgc3dpdGNoIChhcmcpIHtcbiAgICAgIGNhc2UgJ29mZnNldFgnOlxuICAgICAgICB2YWx1ZSA9XG4gICAgICAgICAgdHlwZW9mIGRyb3BTaGFkb3cub2Zmc2V0WCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gcGFyc2VMZW5ndGgoZHJvcFNoYWRvdy5vZmZzZXRYKVxuICAgICAgICAgICAgOiBkcm9wU2hhZG93Lm9mZnNldFg7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0WCA9IHZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ29mZnNldFknOlxuICAgICAgICB2YWx1ZSA9XG4gICAgICAgICAgdHlwZW9mIGRyb3BTaGFkb3cub2Zmc2V0WSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gcGFyc2VMZW5ndGgoZHJvcFNoYWRvdy5vZmZzZXRZKVxuICAgICAgICAgICAgOiBkcm9wU2hhZG93Lm9mZnNldFk7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0WSA9IHZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0YW5kYXJkRGV2aWF0aW9uJzpcbiAgICAgICAgdmFsdWUgPVxuICAgICAgICAgIHR5cGVvZiBkcm9wU2hhZG93LnN0YW5kYXJkRGV2aWF0aW9uID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBwYXJzZUxlbmd0aChkcm9wU2hhZG93LnN0YW5kYXJkRGV2aWF0aW9uKVxuICAgICAgICAgICAgOiBkcm9wU2hhZG93LnN0YW5kYXJkRGV2aWF0aW9uO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZWREcm9wU2hhZG93LnN0YW5kYXJkRGV2aWF0aW9uID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY29sb3InOlxuICAgICAgICBjb25zdCBjb2xvciA9IHByb2Nlc3NDb2xvcihkcm9wU2hhZG93LmNvbG9yKTtcbiAgICAgICAgaWYgKGNvbG9yID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZWREcm9wU2hhZG93LmNvbG9yID0gY29sb3I7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9mZnNldFggPT0gbnVsbCB8fCBvZmZzZXRZID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHBhcnNlZERyb3BTaGFkb3cub2Zmc2V0WCA9IG9mZnNldFg7XG4gIHBhcnNlZERyb3BTaGFkb3cub2Zmc2V0WSA9IG9mZnNldFk7XG5cbiAgcmV0dXJuIHBhcnNlZERyb3BTaGFkb3c7XG59XG5cbmZ1bmN0aW9uIHBhcnNlRHJvcFNoYWRvd1N0cmluZyhyYXdEcm9wU2hhZG93OiBzdHJpbmcpOiA/RHJvcFNoYWRvd1ZhbHVlIHtcbiAgY29uc3QgZHJvcFNoYWRvdzogRHJvcFNoYWRvd1ZhbHVlID0ge1xuICAgIG9mZnNldFg6IDAsXG4gICAgb2Zmc2V0WTogMCxcbiAgfTtcbiAgbGV0IG9mZnNldFg6IHN0cmluZztcbiAgbGV0IG9mZnNldFk6IHN0cmluZztcbiAgbGV0IGxlbmd0aENvdW50ID0gMDtcbiAgbGV0IGtleXdvcmREZXRlY3RlZEFmdGVyTGVuZ3RoID0gZmFsc2U7XG5cbiAgLy8gc3BsaXQgYXJncyBieSBhbGwgd2hpdGVzcGFjZXMgdGhhdCBhcmUgbm90IGluIHBhcmVudGhlc2lzXG4gIGZvciAoY29uc3QgYXJnIG9mIHJhd0Ryb3BTaGFkb3cuc3BsaXQoL1xccysoPyFbXihdKlxcKSkvKSkge1xuICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKGFyZyk7XG4gICAgaWYgKHByb2Nlc3NlZENvbG9yICE9IG51bGwpIHtcbiAgICAgIGlmIChkcm9wU2hhZG93LmNvbG9yICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAob2Zmc2V0WCAhPSBudWxsKSB7XG4gICAgICAgIGtleXdvcmREZXRlY3RlZEFmdGVyTGVuZ3RoID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGRyb3BTaGFkb3cuY29sb3IgPSBhcmc7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGxlbmd0aENvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIG9mZnNldFggPSBhcmc7XG4gICAgICAgIGxlbmd0aENvdW50Kys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAoa2V5d29yZERldGVjdGVkQWZ0ZXJMZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXRZID0gYXJnO1xuICAgICAgICBsZW5ndGhDb3VudCsrO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaWYgKGtleXdvcmREZXRlY3RlZEFmdGVyTGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZHJvcFNoYWRvdy5zdGFuZGFyZERldmlhdGlvbiA9IGFyZztcbiAgICAgICAgbGVuZ3RoQ291bnQrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgaWYgKG9mZnNldFggPT0gbnVsbCB8fCBvZmZzZXRZID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGRyb3BTaGFkb3cub2Zmc2V0WCA9IG9mZnNldFg7XG4gIGRyb3BTaGFkb3cub2Zmc2V0WSA9IG9mZnNldFk7XG4gIHJldHVybiBkcm9wU2hhZG93O1xufVxuXG5mdW5jdGlvbiBwYXJzZUxlbmd0aChsZW5ndGg6IHN0cmluZyk6ID9udW1iZXIge1xuICAvLyBtYXRjaGVzIG9uIGFyZ3Mgd2l0aCB1bml0cyBsaWtlIFwiMS41IDUlIC04MGRlZ1wiXG4gIGNvbnN0IGFyZ3NXaXRoVW5pdHNSZWdleCA9IC8oWystXT9cXGQqKFxcLlxcZCspPykoW1xcd1xcV10rKT8vZztcbiAgY29uc3QgbWF0Y2ggPSBhcmdzV2l0aFVuaXRzUmVnZXguZXhlYyhsZW5ndGgpO1xuXG4gIGlmICghbWF0Y2ggfHwgTnVtYmVyLmlzTmFOKG1hdGNoWzFdKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKG1hdGNoWzNdICE9IG51bGwgJiYgbWF0Y2hbM10gIT09ICdweCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChtYXRjaFszXSA9PSBudWxsICYmIG1hdGNoWzFdICE9PSAnMCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBOdW1iZXIobWF0Y2hbMV0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQUMsTUFBQSxDQUFBQyxjQUFBLENBQUFDLE9BQUE7RUFBQUMsS0FBQTtBQUFBO0FBQUFELE9BQUEsQ0FBQUUsT0FBQSxHQUFBQyxhQUFBO0FBQUEsSUFBQUMsZUFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBS2IsSUFBQVEsYUFBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBcUJlLFNBQVNNLGFBQWFBLENBQ25DRyxNQUFrRCxFQUNwQjtFQUM5QixJQUFJQyxNQUEyQixHQUFHLEVBQUU7RUFDcEMsSUFBSUQsTUFBTSxJQUFJLElBQUksRUFBRTtJQUNsQixPQUFPQyxNQUFNO0VBQ2Y7RUFFQSxJQUFJLE9BQU9ELE1BQU0sS0FBSyxRQUFRLEVBQUU7SUFDOUJBLE1BQU0sR0FBR0EsTUFBTSxDQUFDRSxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQztJQUduQyxJQUFNQyxLQUFLLEdBQUcseURBQXlEO0lBQ3ZFLElBQUlDLE9BQU87SUFFWCxPQUFRQSxPQUFPLEdBQUdELEtBQUssQ0FBQ0UsSUFBSSxDQUFDTCxNQUFNLENBQUMsRUFBRztNQUNyQyxJQUFJTSxVQUFVLEdBQUdGLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ0csV0FBVyxDQUFDLENBQUM7TUFDekMsSUFBSUQsVUFBVSxLQUFLLGFBQWEsRUFBRTtRQUNoQyxJQUFNRSxVQUFVLEdBQUdDLGVBQWUsQ0FBQ0wsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLElBQUlJLFVBQVUsSUFBSSxJQUFJLEVBQUU7VUFDdEJQLE1BQU0sQ0FBQ1MsSUFBSSxDQUFDO1lBQUNGLFVBQVUs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