017527eae2b6759009d9bfeb281dfac4
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useThenable = useThenable;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var React = _interopRequireWildcard(require("react"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function useThenable(create) {
  var _React$useState = React.useState(create),
    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 1),
    promise = _React$useState2[0];
  var initialState = [false, undefined];
  promise.then(function (result) {
    initialState = [true, result];
  });
  var _React$useState3 = React.useState(initialState),
    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),
    state = _React$useState4[0],
    setState = _React$useState4[1];
  var _state = (0, _slicedToArray2.default)(state, 1),
    resolved = _state[0];
  React.useEffect(function () {
    var cancelled = false;
    var resolve = function () {
      var _ref = (0, _asyncToGenerator2.default)(function* () {
        var result;
        try {
          result = yield promise;
        } finally {
          if (!cancelled) {
            setState([true, result]);
          }
        }
      });
      return function resolve() {
        return _ref.apply(this, arguments);
      };
    }();
    if (!resolved) {
      resolve();
    }
    return function () {
      cancelled = true;
    };
  }, [promise, resolved]);
  return state;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidXNlVGhlbmFibGUiLCJjcmVhdGUiLCJfUmVhY3QkdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIl9SZWFjdCR1c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheTIiLCJwcm9taXNlIiwiaW5pdGlhbFN0YXRlIiwidW5kZWZpbmVkIiwidGhlbiIsInJlc3VsdCIsIl9SZWFjdCR1c2VTdGF0ZTMiLCJfUmVhY3QkdXNlU3RhdGU0Iiwic3RhdGUiLCJzZXRTdGF0ZSIsIl9zdGF0ZSIsInJlc29sdmVkIiwidXNlRWZmZWN0IiwiY2FuY2VsbGVkIiwicmVzb2x2ZSIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJhcHBseSIsImFyZ3VtZW50cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91c2VUaGVuYWJsZS50c3giXSwic291cmNlc0NvbnRlbnQiOltudWxsXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUE4QixTQUFBRCx3QkFBQUUsQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQUosdUJBQUEsWUFBQUEsd0JBQUFFLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFB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