f1d641116899da106b6f5ff02d1ceca3
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = processBackgroundImage;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var processColor = require('./processColor').default;
var LINEAR_GRADIENT_DIRECTION_REGEX = /^to\s+(?:top|bottom|left|right)(?:\s+(?:top|bottom|left|right))?/i;
var LINEAR_GRADIENT_ANGLE_UNIT_REGEX = /^([+-]?\d*\.?\d+)(deg|grad|rad|turn)$/i;
var LINEAR_GRADIENT_DEFAULT_DIRECTION = {
  type: 'angle',
  value: 180
};
var DEFAULT_RADIAL_SHAPE = 'ellipse';
var DEFAULT_RADIAL_SIZE = 'farthest-corner';
var DEFAULT_RADIAL_POSITION = {
  top: '50%',
  left: '50%'
};
function processBackgroundImage(backgroundImage) {
  var result = [];
  if (backgroundImage == null) {
    return result;
  }
  if (typeof backgroundImage === 'string') {
    result = parseBackgroundImageCSSString(backgroundImage.replace(/\n/g, ' '));
  } else if (Array.isArray(backgroundImage)) {
    for (var bgImage of backgroundImage) {
      var processedColorStops = processColorStops(bgImage);
      if (processedColorStops == null) {
        return [];
      }
      if (bgImage.type === 'linear-gradient') {
        var direction = LINEAR_GRADIENT_DEFAULT_DIRECTION;
        var bgDirection = bgImage.direction != null ? bgImage.direction.toLowerCase() : null;
        if (bgDirection != null) {
          if (LINEAR_GRADIENT_ANGLE_UNIT_REGEX.test(bgDirection)) {
            var parsedAngle = getAngleInDegrees(bgDirection);
            if (parsedAngle != null) {
              direction = {
                type: 'angle',
                value: parsedAngle
              };
            } else {
              return [];
            }
          } else if (LINEAR_GRADIENT_DIRECTION_REGEX.test(bgDirection)) {
            var parsedDirection = getDirectionForKeyword(bgDirection);
            if (parsedDirection != null) {
              direction = parsedDirection;
            } else {
              return [];
            }
          } else {
            return [];
          }
        }
        result = result.concat({
          type: 'linear-gradient',
          direction: direction,
          colorStops: processedColorStops
        });
      } else if (bgImage.type === 'radial-gradient') {
        var shape = DEFAULT_RADIAL_SHAPE;
        var size = DEFAULT_RADIAL_SIZE;
        var position = Object.assign({}, DEFAULT_RADIAL_POSITION);
        if (bgImage.shape != null) {
          if (bgImage.shape === 'circle' || bgImage.shape === 'ellipse') {
            shape = bgImage.shape;
          } else {
            return [];
          }
        }
        if (bgImage.size != null) {
          if (typeof bgImage.size === 'string' && (bgImage.size === 'closest-side' || bgImage.size === 'closest-corner' || bgImage.size === 'farthest-side' || bgImage.size === 'farthest-corner')) {
            size = bgImage.size;
          } else if (typeof bgImage.size === 'object' && bgImage.size.x != null && bgImage.size.y != null) {
            size = {
              x: bgImage.size.x,
              y: bgImage.size.y
            };
          } else {
            return [];
          }
        }
        if (bgImage.position != null) {
          position = bgImage.position;
        }
        result = result.concat({
          type: 'radial-gradient',
          shape: shape,
          size: size,
          position: position,
          colorStops: processedColorStops
        });
      }
    }
  }
  return result;
}
function processColorStops(bgImage) {
  var processedColorStops = [];
  for (var index = 0; index < bgImage.colorStops.length; index++) {
    var colorStop = bgImage.colorStops[index];
    var positions = colorStop.positions;
    if (colorStop.color == null && Array.isArray(positions) && positions.length === 1) {
      var position = positions[0];
      if (typeof position === 'number' || typeof position === 'string' && position.endsWith('%')) {
        processedColorStops.push({
          color: null,
          position: position
        });
      } else {
        return null;
      }
    } else {
      var processedColor = processColor(colorStop.color);
      if (processedColor == null) {
        return null;
      }
      if (positions != null && positions.length > 0) {
        for (var _position of positions) {
          if (typeof _position === 'number' || typeof _position === 'string' && _position.endsWith('%')) {
            processedColorStops.push({
              color: processedColor,
              position: _position
            });
          } else {
            return null;
          }
        }
      } else {
        processedColorStops.push({
          color: processedColor,
          position: null
        });
      }
    }
  }
  return processedColorStops;
}
function parseBackgroundImageCSSString(cssString) {
  var gradients = [];
  var bgImageStrings = splitGradients(cssString);
  for (var bgImageString of bgImageStrings) {
    var bgImage = bgImageString.toLowerCase();
    var gradientRegex = /^(linear|radial)-gradient\(((?:\([^)]*\)|[^()])*)\)/;
    var match = gradientRegex.exec(bgImage);
    if (match) {
      var _match = (0, _slicedToArray2.default)(match, 3),
        type = _match[1],
        gradientContent = _match[2];
      var isRadial = type.toLowerCase() === 'radial';
      var gradient = isRadial ? parseRadialGradientCSSString(gradientContent) : parseLinearGradientCSSString(gradientContent);
      if (gradient != null) {
        gradients.push(gradient);
      }
    }
  }
  return gradients;
}
function parseRadialGradientCSSString(gradientContent) {
  var shape = DEFAULT_RADIAL_SHAPE;
  var size = DEFAULT_RADIAL_SIZE;
  var position = Object.assign({}, DEFAULT_RADIAL_POSITION);
  var parts = gradientContent.split(/,(?![^(]*\))/);
  var firstPartStr = parts[0].trim();
  var remainingParts = (0, _toConsumableArray2.default)(parts);
  var hasShapeSizeOrPositionString = false;
  var hasExplicitSingleSize = false;
  var hasExplicitShape = false;
  var firstPartTokens = firstPartStr.split(/\s+/);
  while (firstPartTokens.length > 0) {
    var token = firstPartTokens.shift();
    if (token == null) {
      continue;
    }
    var tokenTrimmed = token.toLowerCase().trim();
    if (tokenTrimmed === 'circle' || tokenTrimmed === 'ellipse') {
      shape = tokenTrimmed === 'circle' ? 'circle' : 'ellipse';
      hasShapeSizeOrPositionString = true;
      hasExplicitShape = true;
    } else if (tokenTrimmed === 'closest-corner' || tokenTrimmed === 'farthest-corner' || tokenTrimmed === 'closest-side' || tokenTrimmed === 'farthest-side') {
      size = tokenTrimmed;
      hasShapeSizeOrPositionString = true;
    } else if (tokenTrimmed.endsWith('px') || tokenTrimmed.endsWith('%')) {
      var sizeX = getPositionFromCSSValue(tokenTrimmed);
      if (sizeX == null) {
        return null;
      }
      if (typeof sizeX === 'number' && sizeX < 0) {
        return null;
      }
      hasShapeSizeOrPositionString = true;
      size = {
        x: sizeX,
        y: sizeX
      };
      token = firstPartTokens.shift();
      if (token == null) {
        hasExplicitSingleSize = true;
        continue;
      }
      tokenTrimmed = token.toLowerCase().trim();
      if (tokenTrimmed.endsWith('px') || tokenTrimmed.endsWith('%')) {
        var sizeY = getPositionFromCSSValue(tokenTrimmed);
        if (sizeY == null) {
          return null;
        }
        if (typeof sizeY === 'number' && sizeY < 0) {
          return null;
        }
        size = {
          x: sizeX,
          y: sizeY
        };
      } else {
        hasExplicitSingleSize = true;
      }
    } else if (tokenTrimmed === 'at') {
      var top = void 0;
      var left = void 0;
      var right = void 0;
      var bottom = void 0;
      hasShapeSizeOrPositionString = true;
      if (firstPartTokens.length === 0) {
        return null;
      }
      if (firstPartTokens.length === 1) {
        token = firstPartTokens.shift();
        if (token == null) {
          return null;
        }
        tokenTrimmed = token.toLowerCase().trim();
        if (tokenTrimmed === 'left') {
          left = '0%';
          top = '50%';
        } else if (tokenTrimmed === 'center') {
          left = '50%';
          top = '50%';
        } else if (tokenTrimmed === 'right') {
          left = '100%';
          top = '50%';
        } else if (tokenTrimmed === 'top') {
          left = '50%';
          top = '0%';
        } else if (tokenTrimmed === 'bottom') {
          left = '50%';
          top = '100%';
        } else if (tokenTrimmed.endsWith('px') || tokenTrimmed.endsWith('%')) {
          var value = getPositionFromCSSValue(tokenTrimmed);
          if (value == null) {
            return null;
          }
          left = value;
          top = '50%';
        }
      }
      if (firstPartTokens.length === 2) {
        var t1 = firstPartTokens.shift();
        var t2 = firstPartTokens.shift();
        if (t1 == null || t2 == null) {
          return null;
        }
        var token1 = t1.toLowerCase().trim();
        var token2 = t2.toLowerCase().trim();
        var horizontalPositions = ['left', 'center', 'right'];
        var verticalPositions = ['top', 'center', 'bottom'];
        if (horizontalPositions.includes(token1) && verticalPositions.includes(token2)) {
          left = token1 === 'left' ? '0%' : token1 === 'center' ? '50%' : '100%';
          top = token2 === 'top' ? '0%' : token2 === 'center' ? '50%' : '100%';
        } else if (verticalPositions.includes(token1) && horizontalPositions.includes(token2)) {
          left = token2 === 'left' ? '0%' : token2 === 'center' ? '50%' : '100%';
          top = token1 === 'top' ? '0%' : token1 === 'center' ? '50%' : '100%';
        } else {
          if (token1 === 'left') {
            left = '0%';
          } else if (token1 === 'center') {
            left = '50%';
          } else if (token1 === 'right') {
            left = '100%';
          } else if (token1.endsWith('px') || token1.endsWith('%')) {
            var _value = getPositionFromCSSValue(token1);
            if (_value == null) {
              return null;
            }
            left = _value;
          } else {
            return null;
          }
          if (token2 === 'top') {
            top = '0%';
          } else if (token2 === 'center') {
            top = '50%';
          } else if (token2 === 'bottom') {
            top = '100%';
          } else if (token2.endsWith('px') || token2.endsWith('%')) {
            var _value2 = getPositionFromCSSValue(token2);
            if (_value2 == null) {
              return null;
            }
            top = _value2;
          } else {
            return null;
          }
        }
      }
      if (firstPartTokens.length === 4) {
        var _t = firstPartTokens.shift();
        var _t2 = firstPartTokens.shift();
        var t3 = firstPartTokens.shift();
        var t4 = firstPartTokens.shift();
        if (_t == null || _t2 == null || t3 == null || t4 == null) {
          return null;
        }
        var _token = _t.toLowerCase().trim();
        var _token2 = _t2.toLowerCase().trim();
        var token3 = t3.toLowerCase().trim();
        var token4 = t4.toLowerCase().trim();
        var keyword1 = _token;
        var value1 = getPositionFromCSSValue(_token2);
        var keyword2 = token3;
        var value2 = getPositionFromCSSValue(token4);
        if (value1 == null || value2 == null) {
          return null;
        }
        if (keyword1 === 'left') {
          left = value1;
        } else if (keyword1 === 'right') {
          right = value1;
        } else if (keyword1 === 'top') {
          top = value1;
        } else if (keyword1 === 'bottom') {
          bottom = value1;
        } else {
          return null;
        }
        if (keyword2 === 'left') {
          left = value2;
        } else if (keyword2 === 'right') {
          right = value2;
        } else if (keyword2 === 'top') {
          top = value2;
        } else if (keyword2 === 'bottom') {
          bottom = value2;
        } else {
          return null;
        }
      }
      if (top != null && left != null) {
        position = {
          top: top,
          left: left
        };
      } else if (bottom != null && right != null) {
        position = {
          bottom: bottom,
          right: right
        };
      } else if (top != null && right != null) {
        position = {
          top: top,
          right: right
        };
      } else if (bottom != null && left != null) {
        position = {
          bottom: bottom,
          left: left
        };
      } else {
        return null;
      }
      break;
    }
    if (!hasShapeSizeOrPositionString) {
      break;
    }
  }
  if (hasShapeSizeOrPositionString) {
    remainingParts.shift();
    if (!hasExplicitShape && hasExplicitSingleSize) {
      shape = 'circle';
    }
    if (hasExplicitSingleSize && hasExplicitShape && shape === 'ellipse') {
      return null;
    }
  }
  var colorStops = parseColorStopsCSSString(remainingParts);
  if (colorStops == null) {
    return null;
  }
  return {
    type: 'radial-gradient',
    shape: shape,
    size: size,
    position: position,
    colorStops: colorStops
  };
}
function parseLinearGradientCSSString(gradientContent) {
  var parts = gradientContent.split(',');
  var direction = LINEAR_GRADIENT_DEFAULT_DIRECTION;
  var trimmedDirection = parts[0].trim().toLowerCase();
  if (LINEAR_GRADIENT_ANGLE_UNIT_REGEX.test(trimmedDirection)) {
    var parsedAngle = getAngleInDegrees(trimmedDirection);
    if (parsedAngle != null) {
      direction = {
        type: 'angle',
        value: parsedAngle
      };
      parts.shift();
    } else {
      return null;
    }
  } else if (LINEAR_GRADIENT_DIRECTION_REGEX.test(trimmedDirection)) {
    var parsedDirection = getDirectionForKeyword(trimmedDirection);
    if (parsedDirection != null) {
      direction = parsedDirection;
      parts.shift();
    } else {
      return null;
    }
  }
  var colorStops = parseColorStopsCSSString(parts);
  if (colorStops == null) {
    return null;
  }
  return {
    type: 'linear-gradient',
    direction: direction,
    colorStops: colorStops
  };
}
function parseColorStopsCSSString(parts) {
  var colorStopsString = parts.join(',');
  var colorStops = [];
  var stops = colorStopsString.split(/,(?![^(]*\))/);
  var prevStop = null;
  for (var i = 0; i < stops.length; i++) {
    var stop = stops[i];
    var trimmedStop = stop.trim().toLowerCase();
    var colorStopParts = trimmedStop.match(/\S+\([^)]*\)|\S+/g);
    if (colorStopParts == null) {
      return null;
    }
    if (colorStopParts.length === 3) {
      var color = colorStopParts[0];
      var position1 = getPositionFromCSSValue(colorStopParts[1]);
      var position2 = getPositionFromCSSValue(colorStopParts[2]);
      var processedColor = processColor(color);
      if (processedColor == null) {
        return null;
      }
      if (position1 == null || position2 == null) {
        return null;
      }
      colorStops.push({
        color: processedColor,
        position: position1
      });
      colorStops.push({
        color: processedColor,
        position: position2
      });
    } else if (colorStopParts.length === 2) {
      var _color = colorStopParts[0];
      var position = getPositionFromCSSValue(colorStopParts[1]);
      var _processedColor = processColor(_color);
      if (_processedColor == null) {
        return null;
      }
      if (position == null) {
        return null;
      }
      colorStops.push({
        color: _processedColor,
        position: position
      });
    } else if (colorStopParts.length === 1) {
      var _position2 = getPositionFromCSSValue(colorStopParts[0]);
      if (_position2 != null) {
        if (prevStop != null && prevStop.length === 1 && getPositionFromCSSValue(prevStop[0]) != null || i === stops.length - 1 || i === 0) {
          return null;
        }
        colorStops.push({
          color: null,
          position: _position2
        });
      } else {
        var _processedColor2 = processColor(colorStopParts[0]);
        if (_processedColor2 == null) {
          return null;
        }
        colorStops.push({
          color: _processedColor2,
          position: null
        });
      }
    } else {
      return null;
    }
    prevStop = colorStopParts;
  }
  return colorStops;
}
function getDirectionForKeyword(direction) {
  if (direction == null) {
    return null;
  }
  var normalized = direction.replace(/\s+/g, ' ').toLowerCase();
  switch (normalized) {
    case 'to top':
      return {
        type: 'angle',
        value: 0
      };
    case 'to right':
      return {
        type: 'angle',
        value: 90
      };
    case 'to bottom':
      return {
        type: 'angle',
        value: 180
      };
    case 'to left':
      return {
        type: 'angle',
        value: 270
      };
    case 'to top right':
    case 'to right top':
      return {
        type: 'keyword',
        value: 'to top right'
      };
    case 'to bottom right':
    case 'to right bottom':
      return {
        type: 'keyword',
        value: 'to bottom right'
      };
    case 'to top left':
    case 'to left top':
      return {
        type: 'keyword',
        value: 'to top left'
      };
    case 'to bottom left':
    case 'to left bottom':
      return {
        type: 'keyword',
        value: 'to bottom left'
      };
    default:
      return null;
  }
}
function getAngleInDegrees(angle) {
  if (angle == null) {
    return null;
  }
  var match = angle.match(LINEAR_GRADIENT_ANGLE_UNIT_REGEX);
  if (!match) {
    return null;
  }
  var _match2 = (0, _slicedToArray2.default)(match, 3),
    value = _match2[1],
    unit = _match2[2];
  var numericValue = parseFloat(value);
  switch (unit) {
    case 'deg':
      return numericValue;
    case 'grad':
      return numericValue * 0.9;
    case 'rad':
      return numericValue * 180 / Math.PI;
    case 'turn':
      return numericValue * 360;
    default:
      return null;
  }
}
function getPositionFromCSSValue(position) {
  if (position.endsWith('px')) {
    return parseFloat(position);
  }
  if (position.endsWith('%')) {
    return position;
  }
}
function splitGradients(input) {
  var result = [];
  var current = '';
  var depth = 0;
  for (var i = 0; i < input.length; i++) {
    var char = input[i];
    if (char === '(') {
      depth++;
    } else if (char === ')') {
      depth--;
    } else if (char === ',' && depth === 0) {
      result.push(current.trim());
      current = '';
      continue;
    }
    current += char;
  }
  if (current.trim() !== '') {
    result.push(current.trim());
  }
  return result;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsInByb2Nlc3NCYWNrZ3JvdW5kSW1hZ2UiLCJfdG9Db25zdW1hYmxlQXJyYXkyIiwiX3NsaWNlZFRvQXJyYXkyIiwicHJvY2Vzc0NvbG9yIiwiTElORUFSX0dSQURJRU5UX0RJUkVDVElPTl9SRUdFWCIsIkxJTkVBUl9HUkFESUVOVF9BTkdMRV9VTklUX1JFR0VYIiwiTElORUFSX0dSQURJRU5UX0RFRkFVTFRfRElSRUNUSU9OIiwidHlwZSIsIkRFRkFVTFRfUkFESUFMX1NIQVBFIiwiREVGQVVMVF9SQURJQUxfU0laRSIsIkRFRkFVTFRfUkFESUFMX1BPU0lUSU9OIiwidG9wIiwibGVmdCIsImJhY2tncm91bmRJbWFnZSIsInJlc3VsdCIsInBhcnNlQmFja2dyb3VuZEltYWdlQ1NTU3RyaW5nIiwicmVwbGFjZSIsIkFycmF5IiwiaXNBcnJheSIsImJnSW1hZ2UiLCJwcm9jZXNzZWRDb2xvclN0b3BzIiwicHJvY2Vzc0NvbG9yU3RvcHMiLCJkaXJlY3Rpb24iLCJiZ0RpcmVjdGlvbiIsInRvTG93ZXJDYXNlIiwidGVzdCIsInBhcnNlZEFuZ2xlIiwiZ2V0QW5nbGVJbkRlZ3JlZXMiLCJwYXJzZWREaXJlY3Rpb24iLCJnZXREaXJlY3Rpb25Gb3JLZXl3b3JkIiwiY29uY2F0IiwiY29sb3JTdG9wcyIsInNoYXBlIiwic2l6ZSIsInBvc2l0aW9uIiwiYXNzaWduIiwieCIsInkiLCJpbmRleCIsImxlbmd0aCIsImNvbG9yU3RvcCIsInBvc2l0aW9ucyIsImNvbG9yIiwiZW5kc1dpdGgiLCJwdXNoIiwicHJvY2Vzc2VkQ29sb3IiLCJjc3NTdHJpbmciLCJncmFkaWVudHMiLCJiZ0ltYWdlU3RyaW5ncyIsInNwbGl0R3JhZGllbnRzIiwiYmdJbWFnZVN0cmluZyIsImdyYWRpZW50UmVnZXgiLCJtYXRjaCIsImV4ZWMiLCJfbWF0Y2giLCJncmFkaWVudENvbnRlbnQiLCJpc1JhZGlhbCIsImdyYWRpZW50IiwicGFyc2VSYWRpYWxHcmFkaWVudENTU1N0cmluZyIsInBhcnNlTGluZWFyR3JhZGllbnRDU1NTdHJpbmciLCJwYXJ0cyIsInNwbGl0IiwiZmlyc3RQYXJ0U3RyIiwidHJpbSIsInJlbWFpbmluZ1BhcnRzIiwiaGFzU2hhcGVTaXplT3JQb3NpdGlvblN0cmluZyIsImhhc0V4cGxpY2l0U2luZ2xlU2l6ZSIsImhhc0V4cGxpY2l0U2hhcGUiLCJmaXJzdFBhcnRUb2tlbnMiLCJ0b2tlbiIsInNoaWZ0IiwidG9rZW5UcmltbWVkIiwic2l6ZVgiLCJnZXRQb3NpdGlvbkZyb21DU1NWYWx1ZSIsInNpemVZIiwicmlnaHQiLCJib3R0b20iLCJ0MSIsInQyIiwidG9rZW4xIiwidG9rZW4yIiwiaG9yaXpvbnRhbFBvc2l0aW9ucyIsInZlcnRpY2FsUG9zaXRpb25zIiwiaW5jbHVkZXMiLCJ0MyIsInQ0IiwidG9rZW4zIiwidG9rZW40Iiwia2V5d29yZDEiLCJ2YWx1ZTEiLCJrZXl3b3JkMiIsInZhbHVlMiIsInBhcnNlQ29sb3JTdG9wc0NTU1N0cmluZyIsInRyaW1tZWREaXJlY3Rpb24iLCJjb2xvclN0b3BzU3RyaW5nIiwiam9pbiIsInN0b3BzIiwicHJldlN0b3AiLCJpIiwic3RvcCIsInRyaW1tZWRTdG9wIiwiY29sb3JTdG9wUGFydHMiLCJwb3NpdGlvbjEiLCJwb3NpdGlvbjIiLCJub3JtYWxpemVkIiwiYW5nbGUiLCJfbWF0Y2gyIiwidW5pdCIsIm51bWVyaWNWYWx1ZSIsInBhcnNlRmxvYXQiLCJNYXRoIiwiUEkiLCJpbnB1dCIsImN1cnJlbnQiLCJkZXB0aCIsImNoYXIiXSwic291cmNlcyI6WyJwcm9jZXNzQmFja2dyb3VuZEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtQcm9jZXNzZWRDb2xvclZhbHVlfSBmcm9tICcuL3Byb2Nlc3NDb2xvcic7XG5pbXBvcnQgdHlwZSB7XG4gIEJhY2tncm91bmRJbWFnZVZhbHVlLFxuICBSYWRpYWxHcmFkaWVudFBvc2l0aW9uLFxuICBSYWRpYWxHcmFkaWVudFNoYXBlLFxuICBSYWRpYWxHcmFkaWVudFNpemUsXG59IGZyb20gJy4vU3R5bGVTaGVldFR5cGVzJztcblxuY29uc3QgcHJvY2Vzc0NvbG9yID0gcmVxdWlyZSgnLi9wcm9jZXNzQ29sb3InKS5kZWZhdWx0O1xuXG4vLyBMaW5lYXIgR3JhZGllbnRcbmNvbnN0IExJTkVBUl9HUkFESUVOVF9ESVJFQ1RJT05fUkVHRVggPVxuICAvXnRvXFxzKyg/OnRvcHxib3R0b218bGVmdHxyaWdodCkoPzpcXHMrKD86dG9wfGJvdHRvbXxsZWZ0fHJpZ2h0KSk/L2k7XG5jb25zdCBMSU5FQVJfR1JBRElFTlRfQU5HTEVfVU5JVF9SRUdFWCA9XG4gIC9eKFsrLV0/XFxkKlxcLj9cXGQrKShkZWd8Z3JhZHxyYWR8dHVybikkL2k7XG5jb25zdCBMSU5FQVJfR1JBRElFTlRfREVGQVVMVF9ESVJFQ1RJT046IExpbmVhckdyYWRpZW50RGlyZWN0aW9uID0ge1xuICB0eXBlOiAnYW5nbGUnLFxuICB2YWx1ZTogMTgwLFxufTtcblxudHlwZSBMaW5lYXJHcmFkaWVudERpcmVjdGlvbiA9XG4gIHwge3R5cGU6ICdhbmdsZScsIHZhbHVlOiBudW1iZXJ9XG4gIHwge3R5cGU6ICdrZXl3b3JkJywgdmFsdWU6IHN0cmluZ307XG5cbnR5cGUgTGluZWFyR3JhZGllbnRCYWNrZ3JvdW5kSW1hZ2UgPSB7XG4gIHR5cGU6ICdsaW5lYXItZ3JhZGllbnQnLFxuICBkaXJlY3Rpb246IExpbmVhckdyYWRpZW50RGlyZWN0aW9uLFxuICBjb2xvclN0b3BzOiAkUmVhZE9ubHlBcnJheTx7XG4gICAgY29sb3I6IENvbG9yU3RvcENvbG9yLFxuICAgIHBvc2l0aW9uOiBDb2xvclN0b3BQb3NpdGlvbixcbiAgfT4sXG59O1xuXG4vLyBSYWRpYWwgR3JhZGllbnRcbmNvbnN0IERFRkFVTFRfUkFESUFMX1NIQVBFID0gJ2VsbGlwc2UnO1xuY29uc3QgREVGQVVMVF9SQURJQUxfU0laRSA9ICdmYXJ0aGVzdC1jb3JuZXInO1xuLy8gY2VudGVyXG5jb25zdCBERUZBVUxUX1JBRElBTF9QT1NJVElPTjogUmFkaWFsR3JhZGllbnRQb3NpdGlvbiA9IHtcbiAgdG9wOiAnNTAlJyxcbiAgbGVmdDogJzUwJScsXG59O1xuXG50eXBlIFJhZGlhbEdyYWRpZW50QmFja2dyb3VuZEltYWdlID0ge1xuICB0eXBlOiAncmFkaWFsLWdyYWRpZW50JyxcbiAgc2hhcGU6IFJhZGlhbEdyYWRpZW50U2hhcGUsXG4gIHNpemU6IFJhZGlhbEdyYWRpZW50U2l6ZSxcbiAgcG9zaXRpb246IFJhZGlhbEdyYWRpZW50UG9zaXRpb24sXG4gIGNvbG9yU3RvcHM6ICRSZWFkT25seUFycmF5PHtcbiAgICBjb2xvcjogQ29sb3JTdG9wQ29sb3IsXG4gICAgcG9zaXRpb246IENvbG9yU3RvcFBvc2l0aW9uLFxuICB9Pixcbn07XG5cbi8vIG51bGwgY29sb3IgaW5kaWNhdGUgdGhhdCB0aGUgdHJhbnNpdGlvbiBoaW50IHN5bnRheCBpcyB1c2VkLiBlLmcuIHJlZCwgMjAlLCBibHVlXG50eXBlIENvbG9yU3RvcENvbG9yID0gUHJvY2Vzc2VkQ29sb3JWYWx1ZSB8IG51bGw7XG4vLyBwZXJjZW50YWdlIG9yIHBpeGVsIHZhbHVlXG50eXBlIENvbG9yU3RvcFBvc2l0aW9uID0gbnVtYmVyIHwgc3RyaW5nIHwgbnVsbDtcblxudHlwZSBQYXJzZWRCYWNrZ3JvdW5kSW1hZ2VWYWx1ZSA9XG4gIHwgTGluZWFyR3JhZGllbnRCYWNrZ3JvdW5kSW1hZ2VcbiAgfCBSYWRpYWxHcmFkaWVudEJhY2tncm91bmRJbWFnZTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcHJvY2Vzc0JhY2tncm91bmRJbWFnZShcbiAgYmFja2dyb3VuZEltYWdlOiA/KCRSZWFkT25seUFycmF5PEJhY2tncm91bmRJbWFnZVZhbHVlPiB8IHN0cmluZyksXG4pOiAkUmVhZE9ubHlBcnJheTxQYXJzZWRCYWNrZ3JvdW5kSW1hZ2VWYWx1ZT4ge1xuICBsZXQgcmVzdWx0OiAkUmVhZE9ubHlBcnJheTxQYXJzZWRCYWNrZ3JvdW5kSW1hZ2VWYWx1ZT4gPSBbXTtcbiAgaWYgKGJhY2tncm91bmRJbWFnZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYmFja2dyb3VuZEltYWdlID09PSAnc3RyaW5nJykge1xuICAgIHJlc3VsdCA9IHBhcnNlQmFja2dyb3VuZEltYWdlQ1NTU3RyaW5nKGJhY2tncm91bmRJbWFnZS5yZXBsYWNlKC9cXG4vZywgJyAnKSk7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiYWNrZ3JvdW5kSW1hZ2UpKSB7XG4gICAgZm9yIChjb25zdCBiZ0ltYWdlIG9mIGJhY2tncm91bmRJbWFnZSkge1xuICAgICAgY29uc3QgcHJvY2Vzc2VkQ29sb3JTdG9wcyA9IHByb2Nlc3NDb2xvclN0b3BzKGJnSW1hZ2UpO1xuICAgICAgaWYgKHByb2Nlc3NlZENvbG9yU3RvcHMgPT0gbnVsbCkge1xuICAgICAgICAvLyBJZiBhIGNvbG9yIHN0b3AgaXMgaW52YWxpZCwgcmV0dXJuIGFuIGVtcHR5IGFycmF5IGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmdJbWFnZS50eXBlID09PSAnbGluZWFyLWdyYWRpZW50Jykge1xuICAgICAgICBsZXQgZGlyZWN0aW9uOiBMaW5lYXJHcmFkaWVudERpcmVjdGlvbiA9XG4gICAgICAgICAgTElORUFSX0dSQURJRU5UX0RFRkFVTFRfRElSRUNUSU9OO1xuICAgICAgICBjb25zdCBiZ0RpcmVjdGlvbiA9XG4gICAgICAgICAgYmdJbWFnZS5kaXJlY3Rpb24gIT0gbnVsbCA/IGJnSW1hZ2UuZGlyZWN0aW9uLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xuXG4gICAgICAgIGlmIChiZ0RpcmVjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKExJTkVBUl9HUkFESUVOVF9BTkdMRV9VTklUX1JFR0VYLnRlc3QoYmdEaXJlY3Rpb24pKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRBbmdsZSA9IGdldEFuZ2xlSW5EZWdyZWVzKGJnRGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWRBbmdsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYW5nbGUnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJzZWRBbmdsZSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIElmIGFuIGFuZ2xlIGlzIGludmFsaWQsIHJldHVybiBhbiBlbXB0eSBhcnJheSBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKExJTkVBUl9HUkFESUVOVF9ESVJFQ1RJT05fUkVHRVgudGVzdChiZ0RpcmVjdGlvbikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERpcmVjdGlvbiA9IGdldERpcmVjdGlvbkZvcktleXdvcmQoYmdEaXJlY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHBhcnNlZERpcmVjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHBhcnNlZERpcmVjdGlvbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIElmIGEgZGlyZWN0aW9uIGlzIGludmFsaWQsIHJldHVybiBhbiBlbXB0eSBhcnJheSBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgYSBkaXJlY3Rpb24gaXMgaW52YWxpZCwgcmV0dXJuIGFuIGVtcHR5IGFycmF5IGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHtcbiAgICAgICAgICB0eXBlOiAnbGluZWFyLWdyYWRpZW50JyxcbiAgICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgICAgY29sb3JTdG9wczogcHJvY2Vzc2VkQ29sb3JTdG9wcyxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGJnSW1hZ2UudHlwZSA9PT0gJ3JhZGlhbC1ncmFkaWVudCcpIHtcbiAgICAgICAgbGV0IHNoYXBlOiBSYWRpYWxHcmFkaWVudFNoYXBlID0gREVGQVVMVF9SQURJQUxfU0hBUEU7XG4gICAgICAgIGxldCBzaXplOiBSYWRpYWxHcmFkaWVudFNpemUgPSBERUZBVUxUX1JBRElBTF9TSVpFO1xuICAgICAgICBsZXQgcG9zaXRpb246IFJhZGlhbEdyYWRpZW50UG9zaXRpb24gPSB7Li4uREVGQVVMVF9SQURJQUxfUE9TSVRJT059O1xuXG4gICAgICAgIGlmIChiZ0ltYWdlLnNoYXBlICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoYmdJbWFnZS5zaGFwZSA9PT0gJ2NpcmNsZScgfHwgYmdJbWFnZS5zaGFwZSA9PT0gJ2VsbGlwc2UnKSB7XG4gICAgICAgICAgICBzaGFwZSA9IGJnSW1hZ2Uuc2hhcGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBzaGFwZSBpcyBpbnZhbGlkLCByZXR1cm4gYW4gZW1wdHkgYXJyYXkgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChiZ0ltYWdlLnNpemUgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiBiZ0ltYWdlLnNpemUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICAoYmdJbWFnZS5zaXplID09PSAnY2xvc2VzdC1zaWRlJyB8fFxuICAgICAgICAgICAgICBiZ0ltYWdlLnNpemUgPT09ICdjbG9zZXN0LWNvcm5lcicgfHxcbiAgICAgICAgICAgICAgYmdJbWFnZS5zaXplID09PSAnZmFydGhlc3Qtc2lkZScgfHxcbiAgICAgICAgICAgICAgYmdJbWFnZS5zaXplID09PSAnZmFydGhlc3QtY29ybmVyJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNpemUgPSBiZ0ltYWdlLnNpemU7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiBiZ0ltYWdlLnNpemUgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBiZ0ltYWdlLnNpemUueCAhPSBudWxsICYmXG4gICAgICAgICAgICBiZ0ltYWdlLnNpemUueSAhPSBudWxsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzaXplID0ge1xuICAgICAgICAgICAgICB4OiBiZ0ltYWdlLnNpemUueCxcbiAgICAgICAgICAgICAgeTogYmdJbWFnZS5zaXplLnksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgc2l6ZSBpcyBpbnZhbGlkLCByZXR1cm4gYW4gZW1wdHkgYXJyYXkgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChiZ0ltYWdlLnBvc2l0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IGJnSW1hZ2UucG9zaXRpb247XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHtcbiAgICAgICAgICB0eXBlOiAncmFkaWFsLWdyYWRpZW50JyxcbiAgICAgICAgICBzaGFwZSxcbiAgICAgICAgICBzaXplLFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgIGNvbG9yU3RvcHM6IHByb2Nlc3NlZENvbG9yU3RvcHMsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NDb2xvclN0b3BzKGJnSW1hZ2U6IEJhY2tncm91bmRJbWFnZVZhbHVlKTogJFJlYWRPbmx5QXJyYXk8e1xuICBjb2xvcjogQ29sb3JTdG9wQ29sb3IsXG4gIHBvc2l0aW9uOiBDb2xvclN0b3BQb3NpdGlvbixcbn0+IHwgbnVsbCB7XG4gIGNvbnN0IHByb2Nlc3NlZENvbG9yU3RvcHM6IEFycmF5PHtcbiAgICBjb2xvcjogQ29sb3JTdG9wQ29sb3IsXG4gICAgcG9zaXRpb246IENvbG9yU3RvcFBvc2l0aW9uLFxuICB9PiA9IFtdO1xuXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBiZ0ltYWdlLmNvbG9yU3RvcHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY29uc3QgY29sb3JTdG9wID0gYmdJbWFnZS5jb2xvclN0b3BzW2luZGV4XTtcbiAgICBjb25zdCBwb3NpdGlvbnMgPSBjb2xvclN0b3AucG9zaXRpb25zO1xuICAgIC8vIENvbG9yIHRyYW5zaXRpb24gaGludCBzeW50YXggKHJlZCwgMjAlLCBibHVlKVxuICAgIGlmIChcbiAgICAgIGNvbG9yU3RvcC5jb2xvciA9PSBudWxsICYmXG4gICAgICBBcnJheS5pc0FycmF5KHBvc2l0aW9ucykgJiZcbiAgICAgIHBvc2l0aW9ucy5sZW5ndGggPT09IDFcbiAgICApIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gcG9zaXRpb25zWzBdO1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgcG9zaXRpb24gPT09ICdudW1iZXInIHx8XG4gICAgICAgICh0eXBlb2YgcG9zaXRpb24gPT09ICdzdHJpbmcnICYmIHBvc2l0aW9uLmVuZHNXaXRoKCclJykpXG4gICAgICApIHtcbiAgICAgICAgcHJvY2Vzc2VkQ29sb3JTdG9wcy5wdXNoKHtcbiAgICAgICAgICBjb2xvcjogbnVsbCxcbiAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBhIHBvc2l0aW9uIGlzIGludmFsaWQsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvY2Vzc2VkQ29sb3IgPSBwcm9jZXNzQ29sb3IoY29sb3JTdG9wLmNvbG9yKTtcbiAgICAgIGlmIChwcm9jZXNzZWRDb2xvciA9PSBudWxsKSB7XG4gICAgICAgIC8vIElmIGEgY29sb3IgaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHBvc2l0aW9ucyAhPSBudWxsICYmIHBvc2l0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgcG9zaXRpb25zKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIHBvc2l0aW9uID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgKHR5cGVvZiBwb3NpdGlvbiA9PT0gJ3N0cmluZycgJiYgcG9zaXRpb24uZW5kc1dpdGgoJyUnKSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHByb2Nlc3NlZENvbG9yU3RvcHMucHVzaCh7XG4gICAgICAgICAgICAgIGNvbG9yOiBwcm9jZXNzZWRDb2xvcixcbiAgICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgYSBwb3NpdGlvbiBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzc2VkQ29sb3JTdG9wcy5wdXNoKHtcbiAgICAgICAgICBjb2xvcjogcHJvY2Vzc2VkQ29sb3IsXG4gICAgICAgICAgcG9zaXRpb246IG51bGwsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwcm9jZXNzZWRDb2xvclN0b3BzO1xufVxuXG5mdW5jdGlvbiBwYXJzZUJhY2tncm91bmRJbWFnZUNTU1N0cmluZyhcbiAgY3NzU3RyaW5nOiBzdHJpbmcsXG4pOiAkUmVhZE9ubHlBcnJheTxQYXJzZWRCYWNrZ3JvdW5kSW1hZ2VWYWx1ZT4ge1xuICBjb25zdCBncmFkaWVudHMgPSBbXTtcbiAgY29uc3QgYmdJbWFnZVN0cmluZ3MgPSBzcGxpdEdyYWRpZW50cyhjc3NTdHJpbmcpO1xuXG4gIGZvciAoY29uc3QgYmdJbWFnZVN0cmluZyBvZiBiZ0ltYWdlU3RyaW5ncykge1xuICAgIGNvbnN0IGJnSW1hZ2UgPSBiZ0ltYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgZ3JhZGllbnRSZWdleCA9IC9eKGxpbmVhcnxyYWRpYWwpLWdyYWRpZW50XFwoKCg/OlxcKFteKV0qXFwpfFteKCldKSopXFwpLztcblxuICAgIGNvbnN0IG1hdGNoID0gZ3JhZGllbnRSZWdleC5leGVjKGJnSW1hZ2UpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3QgWywgdHlwZSwgZ3JhZGllbnRDb250ZW50XSA9IG1hdGNoO1xuICAgICAgY29uc3QgaXNSYWRpYWwgPSB0eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdyYWRpYWwnO1xuICAgICAgY29uc3QgZ3JhZGllbnQgPSBpc1JhZGlhbFxuICAgICAgICA/IHBhcnNlUmFkaWFsR3JhZGllbnRDU1NTdHJpbmcoZ3JhZGllbnRDb250ZW50KVxuICAgICAgICA6IHBhcnNlTGluZWFyR3JhZGllbnRDU1NTdHJpbmcoZ3JhZGllbnRDb250ZW50KTtcblxuICAgICAgaWYgKGdyYWRpZW50ICE9IG51bGwpIHtcbiAgICAgICAgZ3JhZGllbnRzLnB1c2goZ3JhZGllbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZ3JhZGllbnRzO1xufVxuXG5mdW5jdGlvbiBwYXJzZVJhZGlhbEdyYWRpZW50Q1NTU3RyaW5nKFxuICBncmFkaWVudENvbnRlbnQ6IHN0cmluZyxcbik6IFJhZGlhbEdyYWRpZW50QmFja2dyb3VuZEltYWdlIHwgbnVsbCB7XG4gIGxldCBzaGFwZTogUmFkaWFsR3JhZGllbnRTaGFwZSA9IERFRkFVTFRfUkFESUFMX1NIQVBFO1xuICBsZXQgc2l6ZTogUmFkaWFsR3JhZGllbnRTaXplID0gREVGQVVMVF9SQURJQUxfU0laRTtcbiAgbGV0IHBvc2l0aW9uOiBSYWRpYWxHcmFkaWVudFBvc2l0aW9uID0gey4uLkRFRkFVTFRfUkFESUFMX1BPU0lUSU9OfTtcblxuICAvLyBzcGxpdCB0aGUgY29udGVudCBieSBjb21tYXMsIGJ1dCBub3QgaWYgaW5zaWRlIHBhcmVudGhlc2VzIChmb3IgY29sb3IgdmFsdWVzKVxuICBjb25zdCBwYXJ0cyA9IGdyYWRpZW50Q29udGVudC5zcGxpdCgvLCg/IVteKF0qXFwpKS8pO1xuICAvLyBmaXJzdCBwYXJ0IG1heSBjb250YWluIHNoYXBlLCBzaXplLCBhbmQgcG9zaXRpb25cbiAgLy8gWyA8cmFkaWFsLXNoYXBlPiB8fCA8cmFkaWFsLXNpemU+IF0/IFsgYXQgPHBvc2l0aW9uPiBdP1xuICBjb25zdCBmaXJzdFBhcnRTdHIgPSBwYXJ0c1swXS50cmltKCk7XG4gIGNvbnN0IHJlbWFpbmluZ1BhcnRzID0gWy4uLnBhcnRzXTtcbiAgbGV0IGhhc1NoYXBlU2l6ZU9yUG9zaXRpb25TdHJpbmcgPSBmYWxzZTtcbiAgbGV0IGhhc0V4cGxpY2l0U2luZ2xlU2l6ZSA9IGZhbHNlO1xuICBsZXQgaGFzRXhwbGljaXRTaGFwZSA9IGZhbHNlO1xuICBjb25zdCBmaXJzdFBhcnRUb2tlbnMgPSBmaXJzdFBhcnRTdHIuc3BsaXQoL1xccysvKTtcblxuICAvLyBmaXJzdFBhcnRUb2tlbnMgaXMgdGhlIHNoYXBlLCBzaXplLCBhbmQgcG9zaXRpb25cbiAgd2hpbGUgKGZpcnN0UGFydFRva2Vucy5sZW5ndGggPiAwKSB7XG4gICAgbGV0IHRva2VuID0gZmlyc3RQYXJ0VG9rZW5zLnNoaWZ0KCk7XG4gICAgaWYgKHRva2VuID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBsZXQgdG9rZW5UcmltbWVkID0gdG9rZW4udG9Mb3dlckNhc2UoKS50cmltKCk7XG5cbiAgICBpZiAodG9rZW5UcmltbWVkID09PSAnY2lyY2xlJyB8fCB0b2tlblRyaW1tZWQgPT09ICdlbGxpcHNlJykge1xuICAgICAgc2hhcGUgPSB0b2tlblRyaW1tZWQgPT09ICdjaXJjbGUnID8gJ2NpcmNsZScgOiAnZWxsaXBzZSc7XG4gICAgICBoYXNTaGFwZVNpemVPclBvc2l0aW9uU3RyaW5nID0gdHJ1ZTtcbiAgICAgIGhhc0V4cGxpY2l0U2hhcGUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0b2tlblRyaW1tZWQgPT09ICdjbG9zZXN0LWNvcm5lcicgfHxcbiAgICAgIHRva2VuVHJpbW1lZCA9PT0gJ2ZhcnRoZXN0LWNvcm5lcicgfHxcbiAgICAgIHRva2VuVHJpbW1lZCA9PT0gJ2Nsb3Nlc3Qtc2lkZScgfHxcbiAgICAgIHRva2VuVHJpbW1lZCA9PT0gJ2ZhcnRoZXN0LXNpZGUnXG4gICAgKSB7XG4gICAgICBzaXplID0gdG9rZW5UcmltbWVkO1xuICAgICAgaGFzU2hhcGVTaXplT3JQb3NpdGlvblN0cmluZyA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0b2tlblRyaW1tZWQuZW5kc1dpdGgoJ3B4JykgfHwgdG9rZW5UcmltbWVkLmVuZHNXaXRoKCclJykpIHtcbiAgICAgIGxldCBzaXplWCA9IGdldFBvc2l0aW9uRnJvbUNTU1ZhbHVlKHRva2VuVHJpbW1lZCk7XG4gICAgICBpZiAoc2l6ZVggPT0gbnVsbCkge1xuICAgICAgICAvLyBJZiBhIHNpemUgaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygc2l6ZVggPT09ICdudW1iZXInICYmIHNpemVYIDwgMCkge1xuICAgICAgICAvLyBJZiBhIHNpemUgaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGhhc1NoYXBlU2l6ZU9yUG9zaXRpb25TdHJpbmcgPSB0cnVlO1xuICAgICAgc2l6ZSA9IHt4OiBzaXplWCwgeTogc2l6ZVh9O1xuICAgICAgdG9rZW4gPSBmaXJzdFBhcnRUb2tlbnMuc2hpZnQoKTtcbiAgICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XG4gICAgICAgIGhhc0V4cGxpY2l0U2luZ2xlU2l6ZSA9IHRydWU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdG9rZW5UcmltbWVkID0gdG9rZW4udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICBpZiAodG9rZW5UcmltbWVkLmVuZHNXaXRoKCdweCcpIHx8IHRva2VuVHJpbW1lZC5lbmRzV2l0aCgnJScpKSB7XG4gICAgICAgIGNvbnN0IHNpemVZID0gZ2V0UG9zaXRpb25Gcm9tQ1NTVmFsdWUodG9rZW5UcmltbWVkKTtcbiAgICAgICAgaWYgKHNpemVZID09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiBhIHNpemUgaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc2l6ZVkgPT09ICdudW1iZXInICYmIHNpemVZIDwgMCkge1xuICAgICAgICAgIC8vIElmIGEgc2l6ZSBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgc2l6ZSA9IHt4OiBzaXplWCwgeTogc2l6ZVl9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGFzRXhwbGljaXRTaW5nbGVTaXplID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRva2VuVHJpbW1lZCA9PT0gJ2F0Jykge1xuICAgICAgbGV0IHRvcDogc3RyaW5nIHwgbnVtYmVyO1xuICAgICAgbGV0IGxlZnQ6IHN0cmluZyB8IG51bWJlcjtcbiAgICAgIGxldCByaWdodDogc3RyaW5nIHwgbnVtYmVyO1xuICAgICAgbGV0IGJvdHRvbTogc3RyaW5nIHwgbnVtYmVyO1xuICAgICAgaGFzU2hhcGVTaXplT3JQb3NpdGlvblN0cmluZyA9IHRydWU7XG5cbiAgICAgIGlmIChmaXJzdFBhcnRUb2tlbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIElmICdhdCcgaXMgbm90IGZvbGxvd2VkIGJ5IGEgcG9zaXRpb24sIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIDEuIFsgbGVmdCB8IGNlbnRlciB8IHJpZ2h0IHwgdG9wIHwgYm90dG9tIHwgPGxlbmd0aC1wZXJjZW50YWdlPiBdXG4gICAgICBpZiAoZmlyc3RQYXJ0VG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0b2tlbiA9IGZpcnN0UGFydFRva2Vucy5zaGlmdCgpO1xuICAgICAgICBpZiAodG9rZW4gPT0gbnVsbCkge1xuICAgICAgICAgIC8vIElmICdhdCcgaXMgbm90IGZvbGxvd2VkIGJ5IGEgcG9zaXRpb24sIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0b2tlblRyaW1tZWQgPSB0b2tlbi50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgaWYgKHRva2VuVHJpbW1lZCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgbGVmdCA9ICcwJSc7XG4gICAgICAgICAgdG9wID0gJzUwJSc7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW5UcmltbWVkID09PSAnY2VudGVyJykge1xuICAgICAgICAgIGxlZnQgPSAnNTAlJztcbiAgICAgICAgICB0b3AgPSAnNTAlJztcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlblRyaW1tZWQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBsZWZ0ID0gJzEwMCUnO1xuICAgICAgICAgIHRvcCA9ICc1MCUnO1xuICAgICAgICB9IGVsc2UgaWYgKHRva2VuVHJpbW1lZCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICBsZWZ0ID0gJzUwJSc7XG4gICAgICAgICAgdG9wID0gJzAlJztcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlblRyaW1tZWQgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgbGVmdCA9ICc1MCUnO1xuICAgICAgICAgIHRvcCA9ICcxMDAlJztcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlblRyaW1tZWQuZW5kc1dpdGgoJ3B4JykgfHwgdG9rZW5UcmltbWVkLmVuZHNXaXRoKCclJykpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldFBvc2l0aW9uRnJvbUNTU1ZhbHVlKHRva2VuVHJpbW1lZCk7XG4gICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIElmIGEgcG9zaXRpb24gaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxlZnQgPSB2YWx1ZTtcbiAgICAgICAgICB0b3AgPSAnNTAlJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmlyc3RQYXJ0VG9rZW5zLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBjb25zdCB0MSA9IGZpcnN0UGFydFRva2Vucy5zaGlmdCgpO1xuICAgICAgICBjb25zdCB0MiA9IGZpcnN0UGFydFRva2Vucy5zaGlmdCgpO1xuICAgICAgICBpZiAodDEgPT0gbnVsbCB8fCB0MiA9PSBudWxsKSB7XG4gICAgICAgICAgLy8gSWYgYSBwb3NpdGlvbiBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b2tlbjEgPSB0MS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgdG9rZW4yID0gdDIudG9Mb3dlckNhc2UoKS50cmltKCk7XG5cbiAgICAgICAgLy8gMi4gWyBsZWZ0IHwgY2VudGVyIHwgcmlnaHQgXSAmJiBbIHRvcCB8IGNlbnRlciB8IGJvdHRvbSBdXG4gICAgICAgIGNvbnN0IGhvcml6b250YWxQb3NpdGlvbnMgPSBbJ2xlZnQnLCAnY2VudGVyJywgJ3JpZ2h0J107XG4gICAgICAgIGNvbnN0IHZlcnRpY2FsUG9zaXRpb25zID0gWyd0b3AnLCAnY2VudGVyJywgJ2JvdHRvbSddO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBob3Jpem9udGFsUG9zaXRpb25zLmluY2x1ZGVzKHRva2VuMSkgJiZcbiAgICAgICAgICB2ZXJ0aWNhbFBvc2l0aW9ucy5pbmNsdWRlcyh0b2tlbjIpXG4gICAgICAgICkge1xuICAgICAgICAgIGxlZnQgPVxuICAgICAgICAgICAgdG9rZW4xID09PSAnbGVmdCcgPyAnMCUnIDogdG9rZW4xID09PSAnY2VudGVyJyA/ICc1MCUnIDogJzEwMCUnO1xuICAgICAgICAgIHRvcCA9IHRva2VuMiA9PT0gJ3RvcCcgPyAnMCUnIDogdG9rZW4yID09PSAnY2VudGVyJyA/ICc1MCUnIDogJzEwMCUnO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHZlcnRpY2FsUG9zaXRpb25zLmluY2x1ZGVzKHRva2VuMSkgJiZcbiAgICAgICAgICBob3Jpem9udGFsUG9zaXRpb25zLmluY2x1ZGVzKHRva2VuMilcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGVmdCA9XG4gICAgICAgICAgICB0b2tlbjIgPT09ICdsZWZ0JyA/ICcwJScgOiB0b2tlbjIgPT09ICdjZW50ZXInID8gJzUwJScgOiAnMTAwJSc7XG4gICAgICAgICAgdG9wID0gdG9rZW4xID09PSAndG9wJyA/ICcwJScgOiB0b2tlbjEgPT09ICdjZW50ZXInID8gJzUwJScgOiAnMTAwJSc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4gWyBsZWZ0IHwgY2VudGVyIHwgcmlnaHQgfCA8bGVuZ3RoLXBlcmNlbnRhZ2U+IF0gWyB0b3AgfCBjZW50ZXIgfCBib3R0b20gfCA8bGVuZ3RoLXBlcmNlbnRhZ2U+IF1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKHRva2VuMSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0ID0gJzAlJztcbiAgICAgICAgICB9IGVsc2UgaWYgKHRva2VuMSA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIGxlZnQgPSAnNTAlJztcbiAgICAgICAgICB9IGVsc2UgaWYgKHRva2VuMSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgbGVmdCA9ICcxMDAlJztcbiAgICAgICAgICB9IGVsc2UgaWYgKHRva2VuMS5lbmRzV2l0aCgncHgnKSB8fCB0b2tlbjEuZW5kc1dpdGgoJyUnKSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXRQb3NpdGlvbkZyb21DU1NWYWx1ZSh0b2tlbjEpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgLy8gSWYgYSBwb3NpdGlvbiBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVmdCA9IHZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBhIHBvc2l0aW9uIGlzIGludmFsaWQsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0b2tlbjIgPT09ICd0b3AnKSB7XG4gICAgICAgICAgICB0b3AgPSAnMCUnO1xuICAgICAgICAgIH0gZWxzZSBpZiAodG9rZW4yID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgdG9wID0gJzUwJSc7XG4gICAgICAgICAgfSBlbHNlIGlmICh0b2tlbjIgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgICB0b3AgPSAnMTAwJSc7XG4gICAgICAgICAgfSBlbHNlIGlmICh0b2tlbjIuZW5kc1dpdGgoJ3B4JykgfHwgdG9rZW4yLmVuZHNXaXRoKCclJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0UG9zaXRpb25Gcm9tQ1NTVmFsdWUodG9rZW4yKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIElmIGEgcG9zaXRpb24gaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvcCA9IHZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBhIHBvc2l0aW9uIGlzIGludmFsaWQsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyA0LiBbIFsgbGVmdCB8IHJpZ2h0IF0gPGxlbmd0aC1wZXJjZW50YWdlPiBdICYmIFsgWyB0b3AgfCBib3R0b20gXSA8bGVuZ3RoLXBlcmNlbnRhZ2U+IF1cbiAgICAgIGlmIChmaXJzdFBhcnRUb2tlbnMubGVuZ3RoID09PSA0KSB7XG4gICAgICAgIGNvbnN0IHQxID0gZmlyc3RQYXJ0VG9rZW5zLnNoaWZ0KCk7XG4gICAgICAgIGNvbnN0IHQyID0gZmlyc3RQYXJ0VG9rZW5zLnNoaWZ0KCk7XG4gICAgICAgIGNvbnN0IHQzID0gZmlyc3RQYXJ0VG9rZW5zLnNoaWZ0KCk7XG4gICAgICAgIGNvbnN0IHQ0ID0gZmlyc3RQYXJ0VG9rZW5zLnNoaWZ0KCk7XG5cbiAgICAgICAgaWYgKHQxID09IG51bGwgfHwgdDIgPT0gbnVsbCB8fCB0MyA9PSBudWxsIHx8IHQ0ID09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiBhIHBvc2l0aW9uIGlzIGludmFsaWQsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2tlbjEgPSB0MS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgdG9rZW4yID0gdDIudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIGNvbnN0IHRva2VuMyA9IHQzLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICBjb25zdCB0b2tlbjQgPSB0NC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgY29uc3Qga2V5d29yZDEgPSB0b2tlbjE7XG4gICAgICAgIGNvbnN0IHZhbHVlMSA9IGdldFBvc2l0aW9uRnJvbUNTU1ZhbHVlKHRva2VuMik7XG4gICAgICAgIGNvbnN0IGtleXdvcmQyID0gdG9rZW4zO1xuICAgICAgICBjb25zdCB2YWx1ZTIgPSBnZXRQb3NpdGlvbkZyb21DU1NWYWx1ZSh0b2tlbjQpO1xuICAgICAgICBpZiAodmFsdWUxID09IG51bGwgfHwgdmFsdWUyID09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiBhIHBvc2l0aW9uIGlzIGludmFsaWQsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChrZXl3b3JkMSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgbGVmdCA9IHZhbHVlMTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXl3b3JkMSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIHJpZ2h0ID0gdmFsdWUxO1xuICAgICAgICB9IGVsc2UgaWYgKGtleXdvcmQxID09PSAndG9wJykge1xuICAgICAgICAgIHRvcCA9IHZhbHVlMTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXl3b3JkMSA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICBib3R0b20gPSB2YWx1ZTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgYSBwb3NpdGlvbiBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5d29yZDIgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGxlZnQgPSB2YWx1ZTI7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5d29yZDIgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICByaWdodCA9IHZhbHVlMjtcbiAgICAgICAgfSBlbHNlIGlmIChrZXl3b3JkMiA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICB0b3AgPSB2YWx1ZTI7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5d29yZDIgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgYm90dG9tID0gdmFsdWUyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIGEgcG9zaXRpb24gaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0b3AgIT0gbnVsbCAmJiBsZWZ0ICE9IG51bGwpIHtcbiAgICAgICAgcG9zaXRpb24gPSB7XG4gICAgICAgICAgdG9wLFxuICAgICAgICAgIGxlZnQsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKGJvdHRvbSAhPSBudWxsICYmIHJpZ2h0ICE9IG51bGwpIHtcbiAgICAgICAgcG9zaXRpb24gPSB7XG4gICAgICAgICAgYm90dG9tLFxuICAgICAgICAgIHJpZ2h0LFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmICh0b3AgIT0gbnVsbCAmJiByaWdodCAhPSBudWxsKSB7XG4gICAgICAgIHBvc2l0aW9uID0ge1xuICAgICAgICAgIHRvcCxcbiAgICAgICAgICByaWdodCxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAoYm90dG9tICE9IG51bGwgJiYgbGVmdCAhPSBudWxsKSB7XG4gICAgICAgIHBvc2l0aW9uID0ge1xuICAgICAgICAgIGJvdHRvbSxcbiAgICAgICAgICBsZWZ0LFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgYSBwb3NpdGlvbiBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgLy8gJ2F0JyBjb21lcyBhdCB0aGUgZW5kIG9mIGZpcnN0IHBhcnQgb2YgcmFkaWFsIGdyYWRpZW50IHN5bnRheDtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIGlmIHRoZXJlIGlzIG5vIHNoYXBlLCBzaXplLCBvciBwb3NpdGlvbiBzdHJpbmcgZm91bmQgaW4gZmlyc3QgdG9rZW4sIGJyZWFrXG4gICAgLy8gaWYgbWlnaHQgYmUgYSBjb2xvciBzdG9wXG4gICAgaWYgKCFoYXNTaGFwZVNpemVPclBvc2l0aW9uU3RyaW5nKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzU2hhcGVTaXplT3JQb3NpdGlvblN0cmluZykge1xuICAgIHJlbWFpbmluZ1BhcnRzLnNoaWZ0KCk7XG5cbiAgICBpZiAoIWhhc0V4cGxpY2l0U2hhcGUgJiYgaGFzRXhwbGljaXRTaW5nbGVTaXplKSB7XG4gICAgICBzaGFwZSA9ICdjaXJjbGUnO1xuICAgIH1cblxuICAgIGlmIChoYXNFeHBsaWNpdFNpbmdsZVNpemUgJiYgaGFzRXhwbGljaXRTaGFwZSAmJiBzaGFwZSA9PT0gJ2VsbGlwc2UnKSB7XG4gICAgICAvLyBJZiBhIHNpbmdsZSBzaXplIGlzIGV4cGxpY2l0bHkgc2V0IGFuZCB0aGUgc2hhcGUgaXMgYW4gZWxsaXBzZSwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29sb3JTdG9wcyA9IHBhcnNlQ29sb3JTdG9wc0NTU1N0cmluZyhyZW1haW5pbmdQYXJ0cyk7XG4gIGlmIChjb2xvclN0b3BzID09IG51bGwpIHtcbiAgICAvLyBJZiBjb2xvciBzdG9wcyBhcmUgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAncmFkaWFsLWdyYWRpZW50JyxcbiAgICBzaGFwZSxcbiAgICBzaXplLFxuICAgIHBvc2l0aW9uLFxuICAgIGNvbG9yU3RvcHMsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlTGluZWFyR3JhZGllbnRDU1NTdHJpbmcoXG4gIGdyYWRpZW50Q29udGVudDogc3RyaW5nLFxuKTogTGluZWFyR3JhZGllbnRCYWNrZ3JvdW5kSW1hZ2UgfCBudWxsIHtcbiAgY29uc3QgcGFydHMgPSBncmFkaWVudENvbnRlbnQuc3BsaXQoJywnKTtcbiAgbGV0IGRpcmVjdGlvbjogTGluZWFyR3JhZGllbnREaXJlY3Rpb24gPSBMSU5FQVJfR1JBRElFTlRfREVGQVVMVF9ESVJFQ1RJT047XG4gIGNvbnN0IHRyaW1tZWREaXJlY3Rpb24gPSBwYXJ0c1swXS50cmltKCkudG9Mb3dlckNhc2UoKTtcblxuICBpZiAoTElORUFSX0dSQURJRU5UX0FOR0xFX1VOSVRfUkVHRVgudGVzdCh0cmltbWVkRGlyZWN0aW9uKSkge1xuICAgIGNvbnN0IHBhcnNlZEFuZ2xlID0gZ2V0QW5nbGVJbkRlZ3JlZXModHJpbW1lZERpcmVjdGlvbik7XG4gICAgaWYgKHBhcnNlZEFuZ2xlICE9IG51bGwpIHtcbiAgICAgIGRpcmVjdGlvbiA9IHtcbiAgICAgICAgdHlwZTogJ2FuZ2xlJyxcbiAgICAgICAgdmFsdWU6IHBhcnNlZEFuZ2xlLFxuICAgICAgfTtcbiAgICAgIHBhcnRzLnNoaWZ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGFuIGFuZ2xlIGlzIGludmFsaWQsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSBlbHNlIGlmIChMSU5FQVJfR1JBRElFTlRfRElSRUNUSU9OX1JFR0VYLnRlc3QodHJpbW1lZERpcmVjdGlvbikpIHtcbiAgICBjb25zdCBwYXJzZWREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb25Gb3JLZXl3b3JkKHRyaW1tZWREaXJlY3Rpb24pO1xuICAgIGlmIChwYXJzZWREaXJlY3Rpb24gIT0gbnVsbCkge1xuICAgICAgZGlyZWN0aW9uID0gcGFyc2VkRGlyZWN0aW9uO1xuICAgICAgcGFydHMuc2hpZnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgYSBkaXJlY3Rpb24gaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29sb3JTdG9wcyA9IHBhcnNlQ29sb3JTdG9wc0NTU1N0cmluZyhwYXJ0cyk7XG4gIGlmIChjb2xvclN0b3BzID09IG51bGwpIHtcbiAgICAvLyBJZiBhIGNvbG9yIHN0b3AgaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnbGluZWFyLWdyYWRpZW50JyxcbiAgICBkaXJlY3Rpb24sXG4gICAgY29sb3JTdG9wcyxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDb2xvclN0b3BzQ1NTU3RyaW5nKHBhcnRzOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8e1xuICBjb2xvcjogQ29sb3JTdG9wQ29sb3IsXG4gIHBvc2l0aW9uOiBDb2xvclN0b3BQb3NpdGlvbixcbn0+IHwgbnVsbCB7XG4gIGNvbnN0IGNvbG9yU3RvcHNTdHJpbmcgPSBwYXJ0cy5qb2luKCcsJyk7XG4gIGNvbnN0IGNvbG9yU3RvcHM6IEFycmF5PHtcbiAgICBjb2xvcjogQ29sb3JTdG9wQ29sb3IsXG4gICAgcG9zaXRpb246IENvbG9yU3RvcFBvc2l0aW9uLFxuICB9PiA9IFtdO1xuICAvLyBzcGxpdCBieSBjb21tYSwgYnV0IG5vdCBpZiBpdCdzIGluc2lkZSBhIHBhcmVudGhlc2VzLiBlLmcuIHJlZCwgcmdiYSgwLCAwLCAwLCAwLjUpLCBncmVlbiA9PiBbXCJyZWRcIiwgXCJyZ2JhKDAsIDAsIDAsIDAuNSlcIiwgXCJncmVlblwiXVxuICBjb25zdCBzdG9wcyA9IGNvbG9yU3RvcHNTdHJpbmcuc3BsaXQoLywoPyFbXihdKlxcKSkvKTtcbiAgbGV0IHByZXZTdG9wID0gbnVsbDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9wcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHN0b3AgPSBzdG9wc1tpXTtcbiAgICBjb25zdCB0cmltbWVkU3RvcCA9IHN0b3AudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgLy8gTWF0Y2ggZnVuY3Rpb24gbGlrZSBwYXR0ZXJuIG9yIHNpbmdsZSB3b3Jkc1xuICAgIGNvbnN0IGNvbG9yU3RvcFBhcnRzID0gdHJpbW1lZFN0b3AubWF0Y2goL1xcUytcXChbXildKlxcKXxcXFMrL2cpO1xuICAgIGlmIChjb2xvclN0b3BQYXJ0cyA9PSBudWxsKSB7XG4gICAgICAvLyBJZiBhIGNvbG9yIHN0b3AgaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIENhc2UgMTogW2NvbG9yLCBwb3NpdGlvbiwgcG9zaXRpb25dXG4gICAgaWYgKGNvbG9yU3RvcFBhcnRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgY29uc3QgY29sb3IgPSBjb2xvclN0b3BQYXJ0c1swXTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uMSA9IGdldFBvc2l0aW9uRnJvbUNTU1ZhbHVlKGNvbG9yU3RvcFBhcnRzWzFdKTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uMiA9IGdldFBvc2l0aW9uRnJvbUNTU1ZhbHVlKGNvbG9yU3RvcFBhcnRzWzJdKTtcbiAgICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKGNvbG9yKTtcbiAgICAgIGlmIChwcm9jZXNzZWRDb2xvciA9PSBudWxsKSB7XG4gICAgICAgIC8vIElmIGEgY29sb3IgaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc2l0aW9uMSA9PSBudWxsIHx8IHBvc2l0aW9uMiA9PSBudWxsKSB7XG4gICAgICAgIC8vIElmIGEgcG9zaXRpb24gaXMgaW52YWxpZCwgcmV0dXJuIG51bGwgYW5kIGRvIG5vdCBhcHBseSBhbnkgZ3JhZGllbnQuIFNhbWUgYXMgd2ViLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29sb3JTdG9wcy5wdXNoKHtcbiAgICAgICAgY29sb3I6IHByb2Nlc3NlZENvbG9yLFxuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24xLFxuICAgICAgfSk7XG4gICAgICBjb2xvclN0b3BzLnB1c2goe1xuICAgICAgICBjb2xvcjogcHJvY2Vzc2VkQ29sb3IsXG4gICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbjIsXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ2FzZSAyOiBbY29sb3IsIHBvc2l0aW9uXVxuICAgIGVsc2UgaWYgKGNvbG9yU3RvcFBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgY29uc3QgY29sb3IgPSBjb2xvclN0b3BQYXJ0c1swXTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZ2V0UG9zaXRpb25Gcm9tQ1NTVmFsdWUoY29sb3JTdG9wUGFydHNbMV0pO1xuICAgICAgY29uc3QgcHJvY2Vzc2VkQ29sb3IgPSBwcm9jZXNzQ29sb3IoY29sb3IpO1xuICAgICAgaWYgKHByb2Nlc3NlZENvbG9yID09IG51bGwpIHtcbiAgICAgICAgLy8gSWYgYSBjb2xvciBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHBvc2l0aW9uID09IG51bGwpIHtcbiAgICAgICAgLy8gSWYgYSBwb3NpdGlvbiBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29sb3JTdG9wcy5wdXNoKHtcbiAgICAgICAgY29sb3I6IHByb2Nlc3NlZENvbG9yLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDYXNlIDM6IFtjb2xvcl1cbiAgICAvLyBDYXNlIDQ6IFtwb3NpdGlvbl0gPT4gdHJhbnNpdGlvbiBoaW50IHN5bnRheFxuICAgIGVsc2UgaWYgKGNvbG9yU3RvcFBhcnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXRQb3NpdGlvbkZyb21DU1NWYWx1ZShjb2xvclN0b3BQYXJ0c1swXSk7XG4gICAgICBpZiAocG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgICAvLyBoYW5kbGUgaW52YWxpZCB0cmFuc2l0aW9uIGhpbnQgc3ludGF4LiB0cmFuc2l0aW9uIGhpbnQgc3ludGF4IG11c3QgaGF2ZSBjb2xvciBiZWZvcmUgYW5kIGFmdGVyIHRoZSBwb3NpdGlvbi4gZS5nLiByZWQsIDIwJSwgYmx1ZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgKHByZXZTdG9wICE9IG51bGwgJiZcbiAgICAgICAgICAgIHByZXZTdG9wLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgZ2V0UG9zaXRpb25Gcm9tQ1NTVmFsdWUocHJldlN0b3BbMF0pICE9IG51bGwpIHx8XG4gICAgICAgICAgaSA9PT0gc3RvcHMubGVuZ3RoIC0gMSB8fFxuICAgICAgICAgIGkgPT09IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGxhc3Qgc3RvcCBpcyBhIHRyYW5zaXRpb24gaGludCBzeW50YXgsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb2xvclN0b3BzLnB1c2goe1xuICAgICAgICAgIGNvbG9yOiBudWxsLFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKGNvbG9yU3RvcFBhcnRzWzBdKTtcbiAgICAgICAgaWYgKHByb2Nlc3NlZENvbG9yID09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiBhIGNvbG9yIGlzIGludmFsaWQsIHJldHVybiBudWxsIGFuZCBkbyBub3QgYXBwbHkgYW55IGdyYWRpZW50LiBTYW1lIGFzIHdlYi5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb2xvclN0b3BzLnB1c2goe1xuICAgICAgICAgIGNvbG9yOiBwcm9jZXNzZWRDb2xvcixcbiAgICAgICAgICBwb3NpdGlvbjogbnVsbCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGEgY29sb3Igc3RvcCBpcyBpbnZhbGlkLCByZXR1cm4gbnVsbCBhbmQgZG8gbm90IGFwcGx5IGFueSBncmFkaWVudC4gU2FtZSBhcyB3ZWIuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcHJldlN0b3AgPSBjb2xvclN0b3BQYXJ0cztcbiAgfVxuXG4gIHJldHVybiBjb2xvclN0b3BzO1xufVxuXG5mdW5jdGlvbiBnZXREaXJlY3Rpb25Gb3JLZXl3b3JkKGRpcmVjdGlvbj86IHN0cmluZyk6ID9MaW5lYXJHcmFkaWVudERpcmVjdGlvbiB7XG4gIGlmIChkaXJlY3Rpb24gPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8vIFJlbW92ZSBleHRyYSB3aGl0ZXNwYWNlXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBkaXJlY3Rpb24ucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRvTG93ZXJDYXNlKCk7XG5cbiAgc3dpdGNoIChub3JtYWxpemVkKSB7XG4gICAgY2FzZSAndG8gdG9wJzpcbiAgICAgIHJldHVybiB7dHlwZTogJ2FuZ2xlJywgdmFsdWU6IDB9O1xuICAgIGNhc2UgJ3RvIHJpZ2h0JzpcbiAgICAgIHJldHVybiB7dHlwZTogJ2FuZ2xlJywgdmFsdWU6IDkwfTtcbiAgICBjYXNlICd0byBib3R0b20nOlxuICAgICAgcmV0dXJuIHt0eXBlOiAnYW5nbGUnLCB2YWx1ZTogMTgwfTtcbiAgICBjYXNlICd0byBsZWZ0JzpcbiAgICAgIHJldHVybiB7dHlwZTogJ2FuZ2xlJywgdmFsdWU6IDI3MH07XG4gICAgY2FzZSAndG8gdG9wIHJpZ2h0JzpcbiAgICBjYXNlICd0byByaWdodCB0b3AnOlxuICAgICAgcmV0dXJuIHt0eXBlOiAna2V5d29yZCcsIHZhbHVlOiAndG8gdG9wIHJpZ2h0J307XG4gICAgY2FzZSAndG8gYm90dG9tIHJpZ2h0JzpcbiAgICBjYXNlICd0byByaWdodCBib3R0b20nOlxuICAgICAgcmV0dXJuIHt0eXBlOiAna2V5d29yZCcsIHZhbHVlOiAndG8gYm90dG9tIHJpZ2h0J307XG4gICAgY2FzZSAndG8gdG9wIGxlZnQnOlxuICAgIGNhc2UgJ3RvIGxlZnQgdG9wJzpcbiAgICAgIHJldHVybiB7dHlwZTogJ2tleXdvcmQnLCB2YWx1ZTogJ3RvIHRvcCBsZWZ0J307XG4gICAgY2FzZSAndG8gYm90dG9tIGxlZnQnOlxuICAgIGNhc2UgJ3RvIGxlZnQgYm90dG9tJzpcbiAgICAgIHJldHVybiB7dHlwZTogJ2tleXdvcmQnLCB2YWx1ZTogJ3RvIGJvdHRvbSBsZWZ0J307XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEFuZ2xlSW5EZWdyZWVzKGFuZ2xlPzogc3RyaW5nKTogP251bWJlciB7XG4gIGlmIChhbmdsZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgbWF0Y2ggPSBhbmdsZS5tYXRjaChMSU5FQVJfR1JBRElFTlRfQU5HTEVfVU5JVF9SRUdFWCk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IFssIHZhbHVlLCB1bml0XSA9IG1hdGNoO1xuXG4gIGNvbnN0IG51bWVyaWNWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICBzd2l0Y2ggKHVuaXQpIHtcbiAgICBjYXNlICdkZWcnOlxuICAgICAgcmV0dXJuIG51bWVyaWNWYWx1ZTtcbiAgICBjYXNlICdncmFkJzpcbiAgICAgIHJldHVybiBudW1lcmljVmFsdWUgKiAwLjk7IC8vIDEgZ3JhZCA9IDAuOSBkZWdyZWVzXG4gICAgY2FzZSAncmFkJzpcbiAgICAgIHJldHVybiAobnVtZXJpY1ZhbHVlICogMTgwKSAvIE1hdGguUEk7XG4gICAgY2FzZSAndHVybic6XG4gICAgICByZXR1cm4gbnVtZXJpY1ZhbHVlICogMzYwOyAvLyAxIHR1cm4gPSAzNjAgZGVncmVlc1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRQb3NpdGlvbkZyb21DU1NWYWx1ZShwb3NpdGlvbjogc3RyaW5nKSB7XG4gIGlmIChwb3NpdGlvbi5lbmRzV2l0aCgncHgnKSkge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHBvc2l0aW9uKTtcbiAgfVxuXG4gIGlmIChwb3NpdGlvbi5lbmRzV2l0aCgnJScpKSB7XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNwbGl0R3JhZGllbnRzKGlucHV0OiBzdHJpbmcpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBjdXJyZW50ID0gJyc7XG4gIGxldCBkZXB0aCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoYXIgPSBpbnB1dFtpXTtcblxuICAgIGlmIChjaGFyID09PSAnKCcpIHtcbiAgICAgIGRlcHRoKys7XG4gICAgfSBlbHNlIGlmIChjaGFyID09PSAnKScpIHtcbiAgICAgIGRlcHRoLS07XG4gICAgfSBlbHNlIGlmIChjaGFyID09PSAnLCcgJiYgZGVwdGggPT09IDApIHtcbiAgICAgIHJlc3VsdC5wdXNoKGN1cnJlbnQudHJpbSgpKTtcbiAgICAgIGN1cnJlbnQgPSAnJztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGN1cnJlbnQgKz0gY2hhcjtcbiAgfVxuXG4gIGlmIChjdXJyZW50LnRyaW0oKSAhPT0gJycpIHtcbiAgICByZXN1bHQucHVzaChjdXJyZW50LnRyaW0oKSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQUMsTUFBQSxDQUFBQyxjQUFBLENBQUFDLE9BQUE7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